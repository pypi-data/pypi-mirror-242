"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[135],{6373:(t,e,n)=>{n.r(e),n.d(e,{linoResolveGetter:()=>y,name:()=>x});var r=n(4782),o=n(6042),s=n(8091),a=n(3424),i=n(2594),l=n(9840),u=n(9430),c=n(1832),h=n(2875),p=n(6637),d=n.n(p);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var x="SiteContext";function b(){return b=(0,h.Z)(d().mark((function t(e){var n,o,l,u,h,p,f,x,b,y,C,P,g,R,A;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C=function(t){var e=n.useState("static"),r=(0,c.Z)(e,2),o=r[0],s=(r[1],n.useState("dark")),a=(0,c.Z)(s,2),i=a[0],u=(a[1],n.useState(!1)),p=(0,c.Z)(u,2),d=p[0],v=p[1],m=n.useState(!1),b=(0,c.Z)(m,2),y=b[0],C=b[1],P=n.useState(!1),g=(0,c.Z)(P,2),R=g[0],A=g[1];return n.createElement("div",{className:l("layout-wrapper",{"layout-overlay":"overlay"===o,"layout-static":"static"===o,"layout-static-sidebar-inactive":d&&"static"===o,"layout-overlay-sidebar-active":y&&"overlay"===o,"layout-mobile-sidebar-active":R}),ref:function(e){return t.APP.topDiv=e}},n.createElement(x,{onToggleMenu:function(t){C(!y),v(!d),A(!R),t&&t.preventDefault()},onHomeButton:t.APP.onHomeButton,WS:t.APP.state.WS,useChat:!1}),n.createElement("div",{className:l("layout-sidebar",{"layout-sidebar-dark":"dark"===i})},n.createElement(h,{style:{height:"100%"}},n.createElement("div",{className:"layout-sidebar-scroll-content"},n.createElement(f,{model:t.APP.state.menu_data,onMenuItemClick:function(t){t.item.items||(C(!1),A(!1))}})))),t.children)},t.next=3,e.resolve("react","default");case 3:return n=t.sent,t.next=6,e.resolve("prop-types","default");case 6:return o=t.sent,t.next=9,e.resolve("classnames","default");case 9:return l=t.sent,t.next=12,e.resolve("lodash","default");case 12:return u=t.sent,t.next=15,e.resolve("primereact/scrollpanel","ScrollPanel");case 15:return h=t.sent,t.next=18,e.resolve("./LinoUtils","constants");case 18:return p=t.sent,t.next=21,e.resolve("./AppMenu","AppMenu");case 21:return f=t.sent,t.next=24,e.resolve("./AppTopbar","AppTopbar");case 24:return x=t.sent,t.next=27,e.resolve("./DashboardItems","DashboardItems");case 27:return b=t.sent,t.next=30,e.resolve("./NavigationControl","Context");case 30:return y=t.sent,(P=function(t){(0,i.Z)(n,t);var e=m(n);function n(t){var r;return(0,s.Z)(this,n),(r=e.call(this,t)).state={initialized:!1},r}return(0,a.Z)(n,[{key:"componentWillUnmount",value:function(){var t=this.state.context.controller;t.isSlave&&delete t.parent.children[t.actionHandler.refName],delete t.APP.rps[t.actionHandler.refName]}}]),n}(n.Component)).Context=n.createContext({}),(g=function(t){(0,i.Z)(r,t);var e=m(r);function r(t){var n;return(0,s.Z)(this,r),(n=e.call(this,t)).state=v(v({},n.state),{},{context:null}),n}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){var t=this,e=this.props.parentContext;new y({APP:e.APP,iPool:e.iPool,value:{},callback:function(n){var r=function(e){Object.assign(e,t.props.params),n.pushStatus(t.props.status,e),n.history.replace(e)};n.setRoot(t),n.setParent(e),t.props.inherit?(n.value=e.copy(),n.value.static=e.value.static,n.value.controller=n,r(n.value)):t.props.simple?n.basicContext(t.props.path,r):n.buildURLContext(t.props.path,r)}})}},{key:"render",value:function(){var t=this,e=this.state.initialized?n.createElement(r.Context.Provider,{value:this.state.context},this.props.children?this.props.children:this.props.getChildren(this.state.context)):null;return this.props.simple?e:n.createElement("div",{ref:function(e){return t.contextEntry=e}},e,n.createElement("div",{ref:function(e){return t.chInPx=e},style:{width:"1ch",visibility:"hidden"}}))}}]),r}(P)).propTypes={children:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(null===t.getChildren)return(e=o.element).isRequired.apply(e,[t].concat(r))},getChildren:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(null===t.children)return(e=o.func).isRequired.apply(e,[t].concat(r))},inherit:o.bool,params:o.object,parentContext:o.instanceOf(y).isRequired,path:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(!t.inherit)return(e=o.string).isRequired.apply(e,[t].concat(r))},simple:o.bool,status:o.object},g.defaultProps={children:null,getChildren:null,inherit:!1,params:{},simple:!0,status:{}},(R=function(t){(0,i.Z)(l,t);var o=m(l);function l(t){var n;return(0,s.Z)(this,l),(n=o.call(this,t)).state=v(v({},n.state),{},{context:t.APP.URLContext.value,hasActor:null}),n.Actor=e.get("./Actor","Actor"),n.state.context.controller.setRoot((0,r.Z)(n)),n}return(0,a.Z)(l,[{key:"componentDidMount",value:function(){var t=this;this.state.context.controller.attachDataContext(new A(this,{success:!1})),this.state.context.controller.build((function(e){e.rs||(e.rs=t.state.context.controller.newSlug(),t.props.APP.router.history.replace({search:"rs=".concat(e.rs)})),t.state.context.controller.history.replace(e)}))}},{key:"render",value:function(){var t=this;return n.createElement(C,{APP:this.props.APP},n.createElement("div",{className:"layout-main",ref:function(e){return t.contextEntry=e}},this.state.initialized&&n.createElement(P.Context.Provider,{value:this.state.context},this.state.hasActor?n.createElement(this.Actor,{actorData:this.state.context.static.actorData}):n.createElement(b,{ref:function(e){t.props.APP.dashboard=e,t.props.APP.setRpRef(e,"dItems")},dashboard_items:this.props.APP.state.user_settings?this.props.APP.state.user_settings.dashboard_items:0,user:this.props.APP.state.user_settings?this.props.APP.state.user_settings.username:"notloaded"})),n.createElement("div",{ref:function(e){return t.chInPx=e},style:{width:"1ch",visibility:"hidden"}})))}}]),l}(P)).propTypes={APP:o.object.isRequired},A=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t),this.saveFileUploadRequest=function(t){n.mutableContext.FileUploadRequest=t},this.root=e,this.backupContext=this.backupContext.bind(this),this.clearMod=this.clearMod.bind(this),this.isModified=this.isModified.bind(this),this.prepContext=this.prepContext.bind(this),this.set=this.set.bind(this),this.setLeafRef=this.setLeafRef.bind(this),this.update=this.update.bind(this),this.updateState=this.updateState.bind(this),this.set(r,!0)}return(0,a.Z)(t,[{key:"prepContext",value:function(t){var e=this;if(t.Leaves={},t.slaveLeaves={},t.virtualLeaves={},t.FileUploadRequest=null,t.modifiedRows={},t.modified=[],t.rows){var n=this.root.context[p.URL_PARAM_LIMIT];t.pks=t.rows.map((function(t){return t[e.root.context.static.actorData.pk_index]}));for(var r=0;r<t.rows.length;r++)t.modifiedRows[r]=[];t.pageCount=Math.floor(t.count/n)}return t}},{key:"backupContext",value:function(t){this.contextBackup=u.cloneDeep(t)}},{key:"clearMod",value:function(){if(this.mutableContext.FileUploadRequest=null,this.mutableContext.modified=[],this.mutableContext.rows)for(var t=0;t<this.mutableContext.rows.length;t++)this.mutableContext.modifiedRows[t]=[];Object.assign(this.mutableContext,u.cloneDeep(this.contextBackup))}},{key:"isModified",value:function(t){if(null!==this.mutableContext.FileUploadRequest)return!0;if(void 0!==t)return isNaN(parseInt(t))?this.mutableContext.modified.length>0:this.mutableContext.modifiedRows[t].length>0;if(this.mutableContext.modified.length)return!0;for(var e=0,n=Object.values(this.mutableContext.modifiedRows);e<n.length;e++)if(n[e].length)return!0;return!1}},{key:"set",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return null};this.backupContext(t),this.mutableContext=this.prepContext(t),e||this.root.setState(v({context:this.mutableContext,displayMode:this.root.context[p.URL_PARAM_DISPLAY_MODE]},n)),r(this.mutableContext)}},{key:"setLeafRef",value:function(t){var e=t.name,n=t.ref,r=t.type;t.input,this.mutableContext[r+"Leaves"][e]=n}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.mutableContext,t),this.root.setState({context:this.mutableContext})}},{key:"updateState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mutableContext=Object.assign({},this.mutableContext,t),this.root.setState(v({context:this.mutableContext},e))}}]),t}(),A.Context=n.createContext({}),t.abrupt("return",{URLContext:g,RootURLContext:R,DataContext:A});case 41:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}Storage.prototype.setObject=function(t,e){this.setItem(t,JSON.stringify(e))},Storage.prototype.getObject=function(t){var e=this.getItem(t);return e&&JSON.parse(e)};var y={resolveGetter:function(t){return b.apply(this,arguments)},resolveNames:["URLContext","RootURLContext","DataContext"]}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5TaXRlQ29udGV4dC41MTEwNmVmNjc5NjY4ZDJiYjliNC5qcyIsIm1hcHBpbmdzIjoid3dDQUVPLElBQU1BLEVBQU8sY0FhWSxTQUFBQyxJQW1VL0IsT0FuVStCQSxHQUFBQyxFQUFBQSxFQUFBQSxHQUFBQyxJQUFBQSxNQUFoQyxTQUFBQyxFQUFpQ0MsR0FBSyxJQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQWM3QkMsRUFBVUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQSxPQUFBakIsSUFBQUEsTUFBQyxTQUFEa0IsR0FBQSxjQUFBQSxFQUFBQyxLQUFBRCxFQUFBRSxNQUFBLE9BNENsQixPQTVDUVAsRUFBVSxTQUFDUSxHQUNoQixJQUFBQyxFQUFrQ25CLEVBQU1vQixTQUFTLFVBQVNDLEdBQUFDLEVBQUFBLEVBQUFBLEdBQUFILEVBQUEsR0FBckRJLEVBQVVGLEVBQUEsR0FBZUcsR0FBQUgsRUFBQSxHQUNjckIsRUFBTW9CLFNBQVMsU0FBT0ssR0FBQUgsRUFBQUEsRUFBQUEsR0FBQUUsRUFBQSxHQUE3REUsRUFBZUQsRUFBQSxHQUFvQkUsR0FBQUYsRUFBQSxHQUNVekIsRUFBTW9CLFVBQVMsSUFBTVEsR0FBQU4sRUFBQUEsRUFBQUEsR0FBQUssRUFBQSxHQUFsRUUsRUFBa0JELEVBQUEsR0FBRUUsRUFBcUJGLEVBQUEsR0FBQUcsRUFDRS9CLEVBQU1vQixVQUFTLEdBQU1ZLEdBQUFWLEVBQUFBLEVBQUFBLEdBQUFTLEVBQUEsR0FBaEVFLEVBQWlCRCxFQUFBLEdBQUVFLEVBQW9CRixFQUFBLEdBQUFHLEVBQ0VuQyxFQUFNb0IsVUFBUyxHQUFNZ0IsR0FBQWQsRUFBQUEsRUFBQUEsR0FBQWEsRUFBQSxHQUE5REUsRUFBZ0JELEVBQUEsR0FBRUUsRUFBbUJGLEVBQUEsR0FFMUMsT0FBT3BDLEVBQUF1QyxjQUFBLE9BQ0hDLFVBQVd0QyxFQUFXLGlCQUFrQixDQUNwQyxpQkFBaUMsWUFBZnFC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LEVBQUFvSSxNQUFDLEtBQURQLFVBQUEsRUF3VTVCMkcsYUFBYyxDQUFDLGFBQWMsaUJBQWtCLGUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW5vX3JlYWN0Ly4vbGlub19yZWFjdC9yZWFjdC9jb21wb25lbnRzL1NpdGVDb250ZXh0LmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cIndlYnBhY2svbW9kdWxlXCIgLz5cblxuZXhwb3J0IGNvbnN0IG5hbWUgPSBcIlNpdGVDb250ZXh0XCI7XG4vLyBpbXBvcnQgKiBhcyBBY3Rvck1vZHVsZSBmcm9tIFwiLi9BY3RvclwiO1xuXG5TdG9yYWdlLnByb3RvdHlwZS5zZXRPYmplY3QgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG59O1xuXG5TdG9yYWdlLnByb3RvdHlwZS5nZXRPYmplY3QgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5nZXRJdGVtKGtleSk7XG4gICAgcmV0dXJuIHZhbHVlICYmIEpTT04ucGFyc2UodmFsdWUpO1xufTtcblxuXG5hc3luYyBmdW5jdGlvbiBzaXRlQ29udGV4dEdldHRlcihpUG9vbCkge1xuY29uc3QgUmVhY3QgPSBhd2FpdCBpUG9vbC5yZXNvbHZlKFwicmVhY3RcIiwgXCJkZWZhdWx0XCIpO1xuY29uc3QgUHJvcFR5cGVzID0gYXdhaXQgaVBvb2wucmVzb2x2ZShcInByb3AtdHlwZXNcIiwgXCJkZWZhdWx0XCIpO1xuY29uc3QgY2xhc3NOYW1lcyA9IGF3YWl0IGlQb29sLnJlc29sdmUoXCJjbGFzc25hbWVzXCIsIFwiZGVmYXVsdFwiKTtcbmNvbnN0IF8gPSBhd2FpdCBpUG9vbC5yZXNvbHZlKFwibG9kYXNoXCIsIFwiZGVmYXVsdFwiKTtcbmNvbnN0IFNjcm9sbFBhbmVsID0gYXdhaXQgaVBvb2wucmVzb2x2ZShcInByaW1lcmVhY3Qvc2Nyb2xscGFuZWxcIiwgXCJTY3JvbGxQYW5lbFwiKTtcblxuY29uc3QgY29uc3RhbnRzID0gYXdhaXQgaVBvb2wucmVzb2x2ZShcIi4vTGlub1V0aWxzXCIsIFwiY29uc3RhbnRzXCIpO1xuY29uc3QgQXBwTWVudSA9IGF3YWl0IGlQb29sLnJlc29sdmUoXCIuL0FwcE1lbnVcIiwgXCJBcHBNZW51XCIpO1xuY29uc3QgQXBwVG9wYmFyID0gYXdhaXQgaVBvb2wucmVzb2x2ZShcIi4vQXBwVG9wYmFyXCIsIFwiQXBwVG9wYmFyXCIpO1xuY29uc3QgRGFzaGJvYXJkSXRlbXMgPSBhd2FpdCBpUG9vbC5yZXNvbHZlKFwiLi9EYXNoYm9hcmRJdGVtc1wiLCBcIkRhc2hib2FyZEl0ZW1zXCIpO1xuY29uc3QgQ29udGV4dENvbnRyb2xsZXIgPSBhd2FpdCBpUG9vbC5yZXNvbHZlKFwiLi9OYXZpZ2F0aW9uQ29udHJvbFwiLCBcIkNvbnRleHRcIik7XG5cblxuZnVuY3Rpb24gTWFpbkxheW91dChwcm9wcykge1xuICAgIGxldCBbbGF5b3V0TW9kZSwgc2V0TGF5b3V0TW9kZV0gPSBSZWFjdC51c2VTdGF0ZShcInN0YXRpY1wiKSxcbiAgICAgICAgW2xheW91dENvbG9yTW9kZSwgc2V0TGF5b3V0Q29sb3JNb2RlXSA9IFJlYWN0LnVzZVN0YXRlKFwiZGFya1wiKSxcbiAgICAgICAgW3N0YXRpY01lbnVJbmFjdGl2ZSwgc2V0U3RhdGljTWVudUluYWN0aXZlXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKSxcbiAgICAgICAgW292ZXJsYXlNZW51QWN0aXZlLCBzZXRPdmVybGF5TWVudUFjdGl2ZV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSksXG4gICAgICAgIFttb2JpbGVNZW51QWN0aXZlLCBzZXRNb2JpbGVNZW51QWN0aXZlXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcblxuICAgIHJldHVybiA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbGF5b3V0LXdyYXBwZXInLCB7XG4gICAgICAgICAgICAnbGF5b3V0LW92ZXJsYXknOiBsYXlvdXRNb2RlID09PSAnb3ZlcmxheScsXG4gICAgICAgICAgICAnbGF5b3V0LXN0YXRpYyc6IGxheW91dE1vZGUgPT09ICdzdGF0aWMnLFxuICAgICAgICAgICAgJ2xheW91dC1zdGF0aWMtc2lkZWJhci1pbmFjdGl2ZSc6IHN0YXRpY01lbnVJbmFjdGl2ZSAmJiBsYXlvdXRNb2RlID09PSAnc3RhdGljJyxcbiAgICAgICAgICAgICdsYXlvdXQtb3ZlcmxheS1zaWRlYmFyLWFjdGl2ZSc6IG92ZXJsYXlNZW51QWN0aXZlICYmIGxheW91dE1vZGUgPT09ICdvdmVybGF5JyxcbiAgICAgICAgICAgICdsYXlvdXQtbW9iaWxlLXNpZGViYXItYWN0aXZlJzogbW9iaWxlTWVudUFjdGl2ZSxcbiAgICAgICAgICAgIC8vICd3aGl0ZXdhbGwtbGF5b3V0LXdyYXBwZXInOiB0aGlzLmRhdGEudGhlbWVOYW1lID09PSAnd2hpdGV3YWxsJyxcbiAgICAgICAgfSl9XG4gICAgICAgIHJlZj17ZWwgPT4gcHJvcHMuQVBQLnRvcERpdiA9IGVsfT5cbiAgICAgICAgPEFwcFRvcGJhclxuICAgICAgICAgICAgb25Ub2dnbGVNZW51PXtldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgc2V0T3ZlcmxheU1lbnVBY3RpdmUoIW92ZXJsYXlNZW51QWN0aXZlKTtcbiAgICAgICAgICAgICAgICBzZXRTdGF0aWNNZW51SW5hY3RpdmUoIXN0YXRpY01lbnVJbmFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgc2V0TW9iaWxlTWVudUFjdGl2ZSghbW9iaWxlTWVudUFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50KSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uSG9tZUJ1dHRvbj17cHJvcHMuQVBQLm9uSG9tZUJ1dHRvbn1cbiAgICAgICAgICAgIFdTPXtwcm9wcy5BUFAuc3RhdGUuV1N9XG4gICAgICAgICAgICB1c2VDaGF0PXtmYWxzZX0vPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXCJsYXlvdXQtc2lkZWJhclwiLCB7J2xheW91dC1zaWRlYmFyLWRhcmsnOiBsYXlvdXRDb2xvck1vZGUgPT09ICdkYXJrJ30pfT5cbiAgICAgICAgICAgIDxTY3JvbGxQYW5lbCBzdHlsZT17e2hlaWdodDogJzEwMCUnfX0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsYXlvdXQtc2lkZWJhci1zY3JvbGwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8QXBwTWVudVxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw9e3Byb3BzLkFQUC5zdGF0ZS5tZW51X2RhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbk1lbnVJdGVtQ2xpY2s9e2V2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50Lml0ZW0uaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0T3ZlcmxheU1lbnVBY3RpdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNb2JpbGVNZW51QWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9fS8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L1Njcm9sbFBhbmVsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgIDwvZGl2PlxufVxuXG5jbGFzcyBVUkxDb250ZXh0QmFzZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KHt9KTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge2luaXRpYWxpemVkOiBmYWxzZX1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgbGV0IGMgPSB0aGlzLnN0YXRlLmNvbnRleHQuY29udHJvbGxlcjtcbiAgICAgICAgaWYgKGMuaXNTbGF2ZSlcbiAgICAgICAgICAgIGRlbGV0ZSBjLnBhcmVudC5jaGlsZHJlbltjLmFjdGlvbkhhbmRsZXIucmVmTmFtZV07XG4gICAgICAgIGRlbGV0ZSBjLkFQUC5ycHNbYy5hY3Rpb25IYW5kbGVyLnJlZk5hbWVdO1xuICAgIH1cbn1cblxuY2xhc3MgVVJMQ29udGV4dCBleHRlbmRzIFVSTENvbnRleHRCYXNlIHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBjaGlsZHJlbjogKHByb3BzLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvcHMuZ2V0Q2hpbGRyZW4gPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb3BUeXBlcy5lbGVtZW50LmlzUmVxdWlyZWQocHJvcHMsIC4uLmFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDaGlsZHJlbjogKHByb3BzLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvcHMuY2hpbGRyZW4gPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQocHJvcHMsIC4uLmFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICBpbmhlcml0OiBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgcGFyYW1zOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICBwYXJlbnRDb250ZXh0OiBQcm9wVHlwZXMuaW5zdGFuY2VPZihDb250ZXh0Q29udHJvbGxlcikuaXNSZXF1aXJlZCxcbiAgICAgICAgcGF0aDogKHByb3BzLCAuLi4gYXJncykgPT4ge1xuICAgICAgICAgICAgaWYgKCFwcm9wcy5pbmhlcml0KVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQocHJvcHMsIC4uLmFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICBzaW1wbGU6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICBzdGF0dXM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IG51bGwsXG4gICAgICAgIGdldENoaWxkcmVuOiBudWxsLFxuICAgICAgICBpbmhlcml0OiBmYWxzZSxcbiAgICAgICAgcGFyYW1zOiB7fSxcbiAgICAgICAgc2ltcGxlOiB0cnVlLFxuICAgICAgICBzdGF0dXM6IHt9LFxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHsuLi50aGlzLnN0YXRlLCBjb250ZXh0OiBudWxsfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBsZXQgcGMgPSB0aGlzLnByb3BzLnBhcmVudENvbnRleHQ7XG4gICAgICAgIG5ldyBDb250ZXh0Q29udHJvbGxlcih7XG4gICAgICAgICAgICBBUFA6IHBjLkFQUCwgaVBvb2w6IHBjLmlQb29sLCB2YWx1ZToge30sIGNhbGxiYWNrOiAoYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRIYW5kbGVyID0gKHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHBhcmFtcywgdGhpcy5wcm9wcy5wYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICBjLnB1c2hTdGF0dXModGhpcy5wcm9wcy5zdGF0dXMsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIGMuaGlzdG9yeS5yZXBsYWNlKHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGMuc2V0Um9vdCh0aGlzKTtcbiAgICAgICAgICAgICAgICBjLnNldFBhcmVudChwYyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuaW5oZXJpdCkge1xuICAgICAgICAgICAgICAgICAgICBjLnZhbHVlID0gcGMuY29weSgpO1xuICAgICAgICAgICAgICAgICAgICBjLnZhbHVlLnN0YXRpYyA9IHBjLnZhbHVlLnN0YXRpYztcbiAgICAgICAgICAgICAgICAgICAgYy52YWx1ZS5jb250cm9sbGVyID0gYztcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dEhhbmRsZXIoYy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuc2ltcGxlKSBjLmJhc2ljQ29udGV4dCh0aGlzLnByb3BzLnBhdGgsIGNvbnRleHRIYW5kbGVyKVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGMuYnVpbGRVUkxDb250ZXh0KHRoaXMucHJvcHMucGF0aCwgY29udGV4dEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBjaGlsZCA9IHRoaXMuc3RhdGUuaW5pdGlhbGl6ZWQgPyA8VVJMQ29udGV4dC5Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXt0aGlzLnN0YXRlLmNvbnRleHR9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVuID8gdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMucHJvcHMuZ2V0Q2hpbGRyZW4odGhpcy5zdGF0ZS5jb250ZXh0KX1cbiAgICAgICAgICAgIDwvVVJMQ29udGV4dC5Db250ZXh0LlByb3ZpZGVyPlxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zaW1wbGVcbiAgICAgICAgICAgID8gY2hpbGRcbiAgICAgICAgICAgIDogPGRpdiByZWY9e2VsID0+IHRoaXMuY29udGV4dEVudHJ5ID0gZWx9PlxuICAgICAgICAgICAgICAgIHtjaGlsZH1cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17ZWwgPT4gdGhpcy5jaEluUHggPSBlbH0gc3R5bGU9e3t3aWR0aDogXCIxY2hcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIn19PjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgfVxufVxuXG5jbGFzcyBSb290VVJMQ29udGV4dCBleHRlbmRzIFVSTENvbnRleHRCYXNlIHtcblxuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIEFQUDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuc3RhdGUsXG4gICAgICAgICAgICBjb250ZXh0OiBwcm9wcy5BUFAuVVJMQ29udGV4dC52YWx1ZSxcbiAgICAgICAgICAgIGhhc0FjdG9yOiBudWxsLFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuQWN0b3IgPSBpUG9vbC5nZXQoXCIuL0FjdG9yXCIsIFwiQWN0b3JcIik7XG4gICAgICAgIHRoaXMuc3RhdGUuY29udGV4dC5jb250cm9sbGVyLnNldFJvb3QodGhpcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuY29udGV4dC5jb250cm9sbGVyLmF0dGFjaERhdGFDb250ZXh0KFxuICAgICAgICAgICAgbmV3IERhdGFDb250ZXh0KHRoaXMsIHtzdWNjZXNzOiBmYWxzZX0pKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5jb250ZXh0LmNvbnRyb2xsZXIuYnVpbGQoXG4gICAgICAgICAgICBwYXJhbXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcGFyYW1zLnJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5ycyA9IHRoaXMuc3RhdGUuY29udGV4dC5jb250cm9sbGVyLm5ld1NsdWcoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5BUFAucm91dGVyLmhpc3RvcnkucmVwbGFjZSh7c2VhcmNoOiBgcnM9JHtwYXJhbXMucnN9YH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbnRleHQuY29udHJvbGxlci5oaXN0b3J5LnJlcGxhY2UocGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiA8TWFpbkxheW91dCBBUFA9e3RoaXMucHJvcHMuQVBQfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGF5b3V0LW1haW5cIiByZWY9e2VsID0+IHRoaXMuY29udGV4dEVudHJ5ID0gZWx9PlxuICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmluaXRpYWxpemVkICYmXG4gICAgICAgICAgICAgICAgICAgIDxVUkxDb250ZXh0QmFzZS5Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXt0aGlzLnN0YXRlLmNvbnRleHR9PlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaGFzQWN0b3IgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGlzLkFjdG9yIGFjdG9yRGF0YT17dGhpcy5zdGF0ZS5jb250ZXh0LnN0YXRpYy5hY3RvckRhdGF9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDxEYXNoYm9hcmRJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9eyhlbCkgPT4geyB0aGlzLnByb3BzLkFQUC5kYXNoYm9hcmQgPSBlbDsgdGhpcy5wcm9wcy5BUFAuc2V0UnBSZWYoZWwsIFwiZEl0ZW1zXCIpfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaGJvYXJkX2l0ZW1zPXt0aGlzLnByb3BzLkFQUC5zdGF0ZS51c2VyX3NldHRpbmdzID8gdGhpcy5wcm9wcy5BUFAuc3RhdGUudXNlcl9zZXR0aW5ncy5kYXNoYm9hcmRfaXRlbXMgOiAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyPXt0aGlzLnByb3BzLkFQUC5zdGF0ZS51c2VyX3NldHRpbmdzID8gdGhpcy5wcm9wcy5BUFAuc3RhdGUudXNlcl9zZXR0aW5ncy51c2VybmFtZSA6IFwibm90bG9hZGVkXCJ9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9VUkxDb250ZXh0QmFzZS5Db250ZXh0LlByb3ZpZGVyPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17ZWwgPT4gdGhpcy5jaEluUHggPSBlbH0gc3R5bGU9e3t3aWR0aDogXCIxY2hcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIn19PjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvTWFpbkxheW91dD5cbiAgICB9XG59XG5cblxuY2xhc3MgRGF0YUNvbnRleHQge1xuICAgIHN0YXRpYyBDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7fSk7XG4gICAgY29uc3RydWN0b3Iocm9vdCwgY29udGV4dCA9IHt9KSB7XG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XG5cbiAgICAgICAgdGhpcy5iYWNrdXBDb250ZXh0ID0gdGhpcy5iYWNrdXBDb250ZXh0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2xlYXJNb2QgPSB0aGlzLmNsZWFyTW9kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNNb2RpZmllZCA9IHRoaXMuaXNNb2RpZmllZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByZXBDb250ZXh0ID0gdGhpcy5wcmVwQ29udGV4dC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNldCA9IHRoaXMuc2V0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2V0TGVhZlJlZiA9IHRoaXMuc2V0TGVhZlJlZi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZSA9IHRoaXMudXBkYXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSB0aGlzLnVwZGF0ZVN0YXRlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zZXQoY29udGV4dCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHJlcENvbnRleHQoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LkxlYXZlcyA9IHt9O1xuICAgICAgICBjb250ZXh0LnNsYXZlTGVhdmVzID0ge307XG4gICAgICAgIGNvbnRleHQudmlydHVhbExlYXZlcyA9IHt9O1xuXG4gICAgICAgIGNvbnRleHQuRmlsZVVwbG9hZFJlcXVlc3QgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgKiBjb250ZXh0Lm1vZGlmaWVkUm93c1xuICAgICAgICAqICoqKioqKioqKioqKioqKioqKioqXG4gICAgICAgICogVXNlZCBpbiBNdWx0aXJvdyBjb250ZXh0O1xuICAgICAgICAqXG4gICAgICAgICogc3RydWN0OiBPYmplY3RcbiAgICAgICAgKiAgICAga2V5OiByb3dJbmRleFxuICAgICAgICAqICAgICB2YWx1ZTpcbiAgICAgICAgKiAgICAgICAgIHN0cnVjdDogQXJyYXlcbiAgICAgICAgKiAgICAgICAgICAgICAtIGNvbC5maWVsZHNfaW5kZXhcbiAgICAgICAgKiovXG4gICAgICAgIGNvbnRleHQubW9kaWZpZWRSb3dzID0ge31cbiAgICAgICAgLyoqXG4gICAgICAgICogY29udGV4dC5tb2RpZmllZFxuICAgICAgICAqICoqKioqKioqKioqKioqKipcbiAgICAgICAgKiBVc2VkIGluIHNpbmdsZSByb3cgY29udGV4dDtcbiAgICAgICAgKlxuICAgICAgICAqIHN0cnVjdDogQXJyYXlbZWxlbS5uYW1lXVxuICAgICAgICAqKi9cbiAgICAgICAgY29udGV4dC5tb2RpZmllZCA9IFtdXG4gICAgICAgIGlmIChjb250ZXh0LnJvd3MpIHtcbiAgICAgICAgICAgIGxldCBsbXQgPSB0aGlzLnJvb3QuY29udGV4dFtjb25zdGFudHMuVVJMX1BBUkFNX0xJTUlUXTtcbiAgICAgICAgICAgIGNvbnRleHQucGtzID0gY29udGV4dC5yb3dzLm1hcChyb3cgPT4gcm93W3RoaXMucm9vdC5jb250ZXh0LnN0YXRpYy5hY3RvckRhdGEucGtfaW5kZXhdKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGV4dC5yb3dzLmxlbmd0aDsgaSsrKSBjb250ZXh0Lm1vZGlmaWVkUm93c1tpXSA9IFtdO1xuICAgICAgICAgICAgY29udGV4dC5wYWdlQ291bnQgPSBNYXRoLmZsb29yKGNvbnRleHQuY291bnQgLyBsbXQpO1xuICAgICAgICAgICAgLy8gaWYgKGNvbnRleHQuY291bnQgPCBsbXQpXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5yb290LmNvbnRleHQuY29udHJvbGxlci5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG4gICAgICAgICAgICAvLyAgICAgICAgIFtjb25zdGFudHMuVVJMX1BBUkFNX0xJTUlUXTogY29udGV4dC5jb3VudCwgbm9yZWxvYWQ6IHRydWV9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZXh0O1xuICAgIH1cblxuICAgIGJhY2t1cENvbnRleHQoY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRleHRCYWNrdXAgPSBfLmNsb25lRGVlcChjb250ZXh0KTtcbiAgICB9XG5cbiAgICBjbGVhck1vZCgpIHtcbiAgICAgICAgdGhpcy5tdXRhYmxlQ29udGV4dC5GaWxlVXBsb2FkUmVxdWVzdCA9IG51bGw7XG4gICAgICAgIHRoaXMubXV0YWJsZUNvbnRleHQubW9kaWZpZWQgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMubXV0YWJsZUNvbnRleHQucm93cylcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tdXRhYmxlQ29udGV4dC5yb3dzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIHRoaXMubXV0YWJsZUNvbnRleHQubW9kaWZpZWRSb3dzW2ldID0gW107XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5tdXRhYmxlQ29udGV4dCwgXy5jbG9uZURlZXAodGhpcy5jb250ZXh0QmFja3VwKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBAcGFyYW0ge251bWJlciB8IFwiZGV0YWlsXCIgfCB1bmRlZmluZWR9IHJvdzsgIEVpdGhlciBhIHJvd0luZGV4IG9yIGNvbnN0YW50cy5ESVNQTEFZX01PREVfREVUQUlMIG9yIHVuZGVmaW5lZFxuICAgICovXG4gICAgaXNNb2RpZmllZChyb3cpIHtcbiAgICAgICAgaWYgKHRoaXMubXV0YWJsZUNvbnRleHQuRmlsZVVwbG9hZFJlcXVlc3QgIT09IG51bGwpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAocm93ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihwYXJzZUludChyb3cpKSkgcmV0dXJuIHRoaXMubXV0YWJsZUNvbnRleHQubW9kaWZpZWQubGVuZ3RoID4gMFxuICAgICAgICAgICAgZWxzZSByZXR1cm4gdGhpcy5tdXRhYmxlQ29udGV4dC5tb2RpZmllZFJvd3Nbcm93XS5sZW5ndGggPiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm11dGFibGVDb250ZXh0Lm1vZGlmaWVkLmxlbmd0aCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGZvciAoY29uc3QgdmFyaWFibGUgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLm11dGFibGVDb250ZXh0Lm1vZGlmaWVkUm93cykpXG4gICAgICAgICAgICBpZiAodmFyaWFibGUubGVuZ3RoKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHNhdmVGaWxlVXBsb2FkUmVxdWVzdCA9ICh4aHJfZm9ybURhdGEpID0+IHtcbiAgICAgICAgdGhpcy5tdXRhYmxlQ29udGV4dC5GaWxlVXBsb2FkUmVxdWVzdCA9IHhocl9mb3JtRGF0YTtcbiAgICB9XG5cbiAgICBzZXQoY29udGV4dCwgc2tpcFVwZGF0ZSwgZXh0cmFTdGF0ZXMgPSB7fSwgY2FsbGJhY2sgPSAoKSA9PiBudWxsKSB7XG4gICAgICAgIHRoaXMuYmFja3VwQ29udGV4dChjb250ZXh0KTtcbiAgICAgICAgdGhpcy5tdXRhYmxlQ29udGV4dCA9IHRoaXMucHJlcENvbnRleHQoY29udGV4dCk7XG4gICAgICAgIGlmICghc2tpcFVwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5yb290LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiB0aGlzLm11dGFibGVDb250ZXh0LFxuICAgICAgICAgICAgICAgIGRpc3BsYXlNb2RlOiB0aGlzLnJvb3QuY29udGV4dFtjb25zdGFudHMuVVJMX1BBUkFNX0RJU1BMQVlfTU9ERV0sXG4gICAgICAgICAgICAgICAgLi4uZXh0cmFTdGF0ZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKHRoaXMubXV0YWJsZUNvbnRleHQpO1xuICAgIH1cblxuICAgIHNldExlYWZSZWYoe25hbWUsIHJlZiwgdHlwZSwgaW5wdXR9KSB7XG4gICAgICAgIHRoaXMubXV0YWJsZUNvbnRleHRbdHlwZSArIFwiTGVhdmVzXCJdW25hbWVdID0gcmVmO1xuICAgIH1cblxuICAgIHVwZGF0ZSh2YWx1ZXMgPSB7fSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMubXV0YWJsZUNvbnRleHQsIHZhbHVlcyk7XG4gICAgICAgIHRoaXMucm9vdC5zZXRTdGF0ZSh7Y29udGV4dDogdGhpcy5tdXRhYmxlQ29udGV4dH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZVN0YXRlKHZhbHVlcywgZXh0cmFTdGF0ZXM9e30pIHtcbiAgICAgICAgdGhpcy5tdXRhYmxlQ29udGV4dCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMubXV0YWJsZUNvbnRleHQsIHZhbHVlcyk7XG4gICAgICAgIHRoaXMucm9vdC5zZXRTdGF0ZSh7Y29udGV4dDogdGhpcy5tdXRhYmxlQ29udGV4dCwgLi4uZXh0cmFTdGF0ZXN9KTtcbiAgICB9XG59XG5cblxucmV0dXJuIHtcbiAgICBVUkxDb250ZXh0OiBVUkxDb250ZXh0LFxuICAgIFJvb3RVUkxDb250ZXh0OiBSb290VVJMQ29udGV4dCxcbiAgICBEYXRhQ29udGV4dDogRGF0YUNvbnRleHRcbn1cbn07XG5cblxuZXhwb3J0IGNvbnN0IGxpbm9SZXNvbHZlR2V0dGVyID0ge1xuICAgIHJlc29sdmVHZXR0ZXI6IHNpdGVDb250ZXh0R2V0dGVyLFxuICAgIHJlc29sdmVOYW1lczogW1wiVVJMQ29udGV4dFwiLCBcIlJvb3RVUkxDb250ZXh0XCIsIFwiRGF0YUNvbnRleHRcIl1cbn1cbiJdLCJuYW1lcyI6WyJuYW1lIiwiX3NpdGVDb250ZXh0R2V0dGVyIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJfcmVnZW5lcmF0b3JSdW50aW1lIiwiX2NhbGxlZSIsImlQb29sIiwiUmVhY3QiLCJQcm9wVHlwZXMiLCJjbGFzc05hbWVzIiwiXyIsIlNjcm9sbFBhbmVsIiwiY29uc3RhbnRzIiwiQXBwTWVudSIsIkFwcFRvcGJhciIsIkRhc2hib2FyZEl0ZW1zIiwiQ29udGV4dENvbnRyb2xsZXIiLCJNYWluTGF5b3V0IiwiVVJMQ29udGV4dEJhc2UiLCJVUkxDb250ZXh0IiwiUm9vdFVSTENvbnRleHQiLCJEYXRhQ29udGV4dCIsIl9jb250ZXh0IiwicHJldiIsIm5leHQiLCJwcm9wcyIsIl9SZWFjdCR1c2VTdGF0ZSIsInVzZVN0YXRlIiwiX1JlYWN0JHVzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5IiwibGF5b3V0TW9kZSIsIl9SZWFjdCR1c2VTdGF0ZTMiLCJfUmVhY3QkdXNlU3RhdGU0IiwibGF5b3V0Q29sb3JNb2RlIiwiX1JlYWN0JHVzZVN0YXRlNSIsIl9SZWFjdCR1c2VTdGF0ZTYiLCJzdGF0aWNNZW51SW5hY3RpdmUiLCJzZXRTdGF0aWNNZW51SW5hY3RpdmUiLCJfUmVhY3QkdXNlU3RhdGU3IiwiX1JlYWN0JHVzZVN0YXRlOCIsIm92ZXJsYXlNZW51QWN0aXZlIiwic2V0T3ZlcmxheU1lbnVBY3RpdmUiLCJfUmVhY3QkdXNlU3RhdGU5IiwiX1JlYWN0JHVzZVN0YXRlMTAiLCJtb2JpbGVNZW51QWN0aXZlIiwic2V0TW9iaWxlTWVudUFjdGl2ZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJyZWYiLCJlbCIsIkFQUCIsInRvcERpdiIsIm9uVG9nZ2xlTWVudSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJvbkhvbWVCdXR0b24iLCJXUyIsInN0YXRlIiwidXNlQ2hhdCIsInN0eWxlIiwiaGVpZ2h0IiwibW9kZWwiLCJtZW51X2RhdGEiLCJvbk1lbnVJdGVtQ2xpY2siLCJpdGVtIiwiaXRlbXMiLCJjaGlsZHJlbiIsInJlc29sdmUiLCJzZW50IiwiX1JlYWN0JENvbXBvbmVudCIsIl9pbmhlcml0cyIsIl9zdXBlciIsIl9jcmVhdGVTdXBlciIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwiY2FsbCIsImluaXRpYWxpemVkIiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwidmFsdWUiLCJjIiwidGhpcyIsImNvbnRleHQiLCJjb250cm9sbGVyIiwiaXNTbGF2ZSIsInBhcmVudCIsImFjdGlvbkhhbmRsZXIiLCJyZWZOYW1lIiwicnBzIiwiQ29tcG9uZW50IiwiQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJfVVJMQ29udGV4dEJhc2UiLCJfc3VwZXIyIiwiX3RoaXMyIiwiX29iamVjdFNwcmVhZCIsIl90aGlzMyIsInBjIiwicGFyZW50Q29udGV4dCIsImNhbGxiYWNrIiwiY29udGV4dEhhbmRsZXIiLCJwYXJhbXMiLCJPYmplY3QiLCJhc3NpZ24iLCJwdXNoU3RhdHVzIiwic3RhdHVzIiwiaGlzdG9yeSIsInJlcGxhY2UiLCJzZXRSb290Iiwic2V0UGFyZW50IiwiaW5oZXJpdCIsImNvcHkiLCJzaW1wbGUiLCJiYXNpY0NvbnRleHQiLCJwYXRoIiwiYnVpbGRVUkxDb250ZXh0IiwiX3RoaXM0IiwiY2hpbGQiLCJQcm92aWRlciIsImdldENoaWxkcmVuIiwiY29udGV4dEVudHJ5IiwiY2hJblB4Iiwid2lkdGgiLCJ2aXNpYmlsaXR5IiwicHJvcFR5cGVzIiwiX1Byb3BUeXBlcyRlbGVtZW50IiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJlbGVtZW50IiwiaXNSZXF1aXJlZCIsImFwcGx5IiwiY29uY2F0IiwiX1Byb3BUeXBlcyRmdW5jIiwiX2xlbjIiLCJfa2V5MiIsImZ1bmMiLCJib29sIiwib2JqZWN0IiwiaW5zdGFuY2VPZiIsIl9Qcm9wVHlwZXMkc3RyaW5nIiwiX2xlbjMiLCJfa2V5MyIsInN0cmluZyIsImRlZmF1bHRQcm9wcyIsIl9VUkxDb250ZXh0QmFzZTIiLCJfc3VwZXIzIiwiX3RoaXM1IiwiaGFzQWN0b3IiLCJBY3RvciIsImdldCIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJfdGhpczYiLCJhdHRhY2hEYXRhQ29udGV4dCIsInN1Y2Nlc3MiLCJidWlsZCIsInJzIiwibmV3U2x1ZyIsInJvdXRlciIsInNlYXJjaCIsIl90aGlzNyIsImFjdG9yRGF0YSIsImRhc2hib2FyZCIsInNldFJwUmVmIiwiZGFzaGJvYXJkX2l0ZW1zIiwidXNlcl9zZXR0aW5ncyIsInVzZXIiLCJ1c2VybmFtZSIsInJvb3QiLCJfdGhpczgiLCJ1bmRlZmluZWQiLCJzYXZlRmlsZVVwbG9hZFJlcXVlc3QiLCJ4aHJfZm9ybURhdGEiLCJtdXRhYmxlQ29udGV4dCIsIkZpbGVVcGxvYWRSZXF1ZXN0IiwiYmFja3VwQ29udGV4dCIsImJpbmQiLCJjbGVhck1vZCIsImlzTW9kaWZpZWQiLCJwcmVwQ29udGV4dCIsInNldCIsInNldExlYWZSZWYiLCJ1cGRhdGUiLCJ1cGRhdGVTdGF0ZSIsIl90aGlzOSIsIkxlYXZlcyIsInNsYXZlTGVhdmVzIiwidmlydHVhbExlYXZlcyIsIm1vZGlmaWVkUm93cyIsIm1vZGlmaWVkIiwicm93cyIsImxtdCIsIlVSTF9QQVJBTV9MSU1JVCIsInBrcyIsIm1hcCIsInJvdyIsInBrX2luZGV4IiwiaSIsInBhZ2VDb3VudCIsIk1hdGgiLCJmbG9vciIsImNvdW50IiwiY29udGV4dEJhY2t1cCIsImNsb25lRGVlcCIsImlzTmFOIiwicGFyc2VJbnQiLCJfaSIsIl9PYmplY3QkdmFsdWVzIiwidmFsdWVzIiwic2tpcFVwZGF0ZSIsImV4dHJhU3RhdGVzIiwic2V0U3RhdGUiLCJkaXNwbGF5TW9kZSIsIlVSTF9QQVJBTV9ESVNQTEFZX01PREUiLCJfcmVmIiwidHlwZSIsImlucHV0IiwiYWJydXB0Iiwic3RvcCIsIlN0b3JhZ2UiLCJwcm90b3R5cGUiLCJzZXRPYmplY3QiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldE9iamVjdCIsImdldEl0ZW0iLCJwYXJzZSIsImxpbm9SZXNvbHZlR2V0dGVyIiwicmVzb2x2ZUdldHRlciIsIl94IiwicmVzb2x2ZU5hbWVzIl0sInNvdXJjZVJvb3QiOiIifQ==