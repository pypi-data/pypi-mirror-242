import{S as ie,i as re,s as se,k as R,a as H,q as oe,e as D,l as C,m as M,h as v,c as W,r as fe,n as A,F as p,p as B,b as I,a0 as N,G as ge,v as K,d as w,f as O,g as b,u as ce,X as pe,Y as be,a2 as ve,a3 as Q,y as T,z as U,A as q,B as j,a4 as ke,O as we}from"./index.c820bada.js";import{a2 as Se,ao as ye,ai as P,U as Ee,aj as Ve,aw as $e,aF as Fe,W as Ie,av as Pe,aB as Ne,bu as Ae,aG as De,bv as Le,bw as Re,a9 as Ce}from"./Commands.9e466438.js";import{s as Z,C as Me,a as Ye}from"./notificationsStore.315ab01e.js";function x(r,e,l){const t=r.slice();return t[2]=e[l],t}function ze(r){let e,l;return e=new Me({}),{c(){T(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function Be(r){let e,l;return e=new Ye({}),{c(){T(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function ee(r){var o;let e,l=(r[0].formattedValue||((o=r[0].children)!=null&&o.length?"":"n/a"))+"",t,n;return{c(){e=R("div"),t=oe(l),this.h()},l(a){e=C(a,"DIV",{title:!0,class:!0});var s=M(e);t=fe(s,l),s.forEach(v),this.h()},h(){var a,s;A(e,"title",n=(a=r[0].value)==null?void 0:a.toString()),A(e,"class","truncated text-right svelte-1woyz4e"),p(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(a,s){I(a,e,s),N(e,t)},p(a,s){var i,c,u;s&1&&l!==(l=(a[0].formattedValue||((i=a[0].children)!=null&&i.length?"":"n/a"))+"")&&ce(t,l),s&1&&n!==(n=(c=a[0].value)==null?void 0:c.toString())&&A(e,"title",n),s&1&&p(e,"italic",!a[0].formattedValue&&!((u=a[0].children)!=null&&u.length))},d(a){a&&v(e)}}}function te(r){let e,l=[],t=new Map,n,o,a=r[0].children;const s=i=>Se(i[2].path);for(let i=0;i<a.length;i+=1){let c=x(r,a,i),u=s(c);t.set(u,l[i]=le(u,c))}return{c(){e=R("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=C(i,"DIV",{});var c=M(e);for(let u=0;u<l.length;u+=1)l[u].l(c);c.forEach(v),this.h()},h(){p(e,"bg-blue-100",r[0].isSignal),p(e,"bg-emerald-100",r[0].isPreviewSignal)},m(i,c){I(i,e,c);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);o=!0},p(i,c){c&1&&(a=i[0].children,K(),l=pe(l,c,s,1,i,a,t,e,be,le,null,x),O()),(!o||c&1)&&p(e,"bg-blue-100",i[0].isSignal),(!o||c&1)&&p(e,"bg-emerald-100",i[0].isPreviewSignal)},i(i){if(!o){for(let c=0;c<a.length;c+=1)b(l[c]);i&&ve(()=>{o&&(n||(n=Q(e,Z,{},!0)),n.run(1))}),o=!0}},o(i){for(let c=0;c<l.length;c+=1)w(l[c]);i&&(n||(n=Q(e,Z,{},!1)),n.run(0)),o=!1},d(i){i&&v(e);for(let c=0;c<l.length;c+=1)l[c].d();i&&n&&n.end()}}}function le(r,e){let l,t,n;return t=new de({props:{node:e[2]}}),{key:r,first:null,c(){l=D(),T(t.$$.fragment),this.h()},l(o){l=D(),U(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,a){I(o,l,a),q(t,o,a),n=!0},p(o,a){e=o;const s={};a&1&&(s.node=e[2]),t.$set(s)},i(o){n||(b(t.$$.fragment,o),n=!0)},o(o){w(t.$$.fragment,o),n=!1},d(o){o&&v(l),j(t,o)}}}function Ke(r){var z;let e,l,t,n,o,a,s=r[0].fieldName+"",i,c,u,d,g,y,V;const L=[Be,ze],S=[];function Y(f,h){return f[0].expanded?0:1}t=Y(r),n=S[t]=L[t](r);let _=(r[0].formattedValue||!((z=r[0].children)!=null&&z.length))&&ee(r),m=r[0].children&&r[0].expanded&&te(r);return{c(){e=R("div"),l=R("button"),n.c(),o=H(),a=R("div"),i=oe(s),c=H(),_&&_.c(),u=H(),m&&m.c(),d=D(),this.h()},l(f){e=C(f,"DIV",{class:!0});var h=M(e);l=C(h,"BUTTON",{class:!0});var E=M(l);n.l(E),E.forEach(v),o=W(h),a=C(h,"DIV",{class:!0});var $=M(a);i=fe($,s),$.forEach(v),c=W(h),_&&_.l(h),h.forEach(v),u=W(f),m&&m.l(f),d=D(),this.h()},h(){var f;A(l,"class","p-1"),p(l,"invisible",!((f=r[0].children)!=null&&f.length)),A(a,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),B(a,"min-width","10ch"),A(e,"class","flex items-center gap-x-1 pr-2 text-xs"),p(e,"bg-blue-100",r[0].isSignal),p(e,"bg-emerald-100",r[0].isPreviewSignal),p(e,"bg-teal-100",r[0].isLabel),B(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),B(e,"line-height","1.7rem")},m(f,h){I(f,e,h),N(e,l),S[t].m(l,null),N(e,o),N(e,a),N(a,i),N(e,c),_&&_.m(e,null),I(f,u,h),m&&m.m(f,h),I(f,d,h),g=!0,y||(V=ge(l,"click",r[1]),y=!0)},p(f,[h]){var $,k;let E=t;t=Y(f),t!==E&&(K(),w(S[E],1,1,()=>{S[E]=null}),O(),n=S[t],n||(n=S[t]=L[t](f),n.c()),b(n,1),n.m(l,null)),(!g||h&1)&&p(l,"invisible",!(($=f[0].children)!=null&&$.length)),(!g||h&1)&&s!==(s=f[0].fieldName+"")&&ce(i,s),f[0].formattedValue||!((k=f[0].children)!=null&&k.length)?_?_.p(f,h):(_=ee(f),_.c(),_.m(e,null)):_&&(_.d(1),_=null),(!g||h&1)&&p(e,"bg-blue-100",f[0].isSignal),(!g||h&1)&&p(e,"bg-emerald-100",f[0].isPreviewSignal),(!g||h&1)&&p(e,"bg-teal-100",f[0].isLabel),h&1&&B(e,"padding-left",.25+(f[0].path.length-1)*.5+"rem"),f[0].children&&f[0].expanded?m?(m.p(f,h),h&1&&b(m,1)):(m=te(f),m.c(),b(m,1),m.m(d.parentNode,d)):m&&(K(),w(m,1,1,()=>{m=null}),O())},i(f){g||(b(n),b(m),g=!0)},o(f){w(n),w(m),g=!1},d(f){f&&v(e),S[t].d(),_&&_.d(),f&&v(u),m&&m.d(f),f&&v(d),y=!1,V()}}}function ue(r){r.expanded=!0,r.children&&r.children.forEach(ue)}function Oe(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&ue(t),l(0,t)};return r.$$set=o=>{"node"in o&&l(0,t=o.node)},[t,n]}class de extends ie{constructor(e){super(),re(this,e,Oe,Ke,se,{node:0})}}function ne(r,e,l){const t=r.slice();return t[7]=e[l],t}function ae(r){let e,l;return e=new de({props:{node:r[7]}}),{c(){T(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.node=t[7]),e.$set(o)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function Te(r){let e,l,t=r[0].children||[],n=[];for(let a=0;a<t.length;a+=1)n[a]=ae(ne(r,t,a));const o=a=>w(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=D()},l(a){for(let s=0;s<n.length;s+=1)n[s].l(a);e=D()},m(a,s){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,s);I(a,e,s),l=!0},p(a,[s]){if(s&1){t=a[0].children||[];let i;for(i=0;i<t.length;i+=1){const c=ne(a,t,i);n[i]?(n[i].p(c,s),b(n[i],1)):(n[i]=ae(c),n[i].c(),b(n[i],1),n[i].m(e.parentNode,e))}for(K(),i=t.length;i<n.length;i+=1)o(i);O()}},i(a){if(!l){for(let s=0;s<t.length;s+=1)b(n[s]);l=!0}},o(a){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(a){ke(n,a),a&&v(e)}}}function Ue(r,e,l){let t,n,{row:o}=e,{selectRowsSchema:a=void 0}=e,{highlightedFields:s}=e;const i=ye();we(r,i,u=>l(5,n=u));function c(u){var f,h,E,$;const d=P.field(u),g=P.path(u);let y=P.value(u),V=P.span(u);if(((f=d==null?void 0:d.dtype)==null?void 0:f.type)==="string_span"&&(V=V||y,V!=null)){const k=[];for(let F=g.length-1;F>=0;F--){const G=g.slice(0,F);if(((h=Ee(a.schema,G).dtype)==null?void 0:h.type)==="string"){const X=P.value(Ve(o,G));k.push(X.slice(V.start,V.end));break}}y=k}const L=((E=n.data)==null?void 0:E.some(k=>{var F;return k.name===((F=d==null?void 0:d.signal)==null?void 0:F.signal_name)}))||!1,S=d?$e(d):!1,Y=d?Fe(d):!1;let _;L||S&&(d==null?void 0:d.dtype)==null||(($=d==null?void 0:d.dtype)==null?void 0:$.type)==="embedding"||(d==null?void 0:d.repeated_field)!=null?_="":y==null?_=null:_=Ie(y);function m(k){const{[Ae]:F,[De]:G,[Le]:he,[Re]:X,[Ce]:qe,...me}=k;return Object.values(me).filter(_e=>{var J;return((J=P.field(_e))==null?void 0:J.label)==null})}const z=s.some(k=>Pe(k.path,g));return{children:Array.isArray(u)?u.map(c):m(u).map(c),fieldName:g[g.length-1],field:d,path:g,expanded:z,isSignal:S,isLabel:Y,isPreviewSignal:a!=null?Ne(a,g):!1,isEmbeddingSignal:L,value:y,formattedValue:_}}return r.$$set=u=>{"row"in u&&l(2,o=u.row),"selectRowsSchema"in u&&l(3,a=u.selectRowsSchema),"highlightedFields"in u&&l(4,s=u.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=c(o))},[t,i,o,a,s]}class We extends ie{constructor(e){super(),re(this,e,Ue,Te,se,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{We as I};
