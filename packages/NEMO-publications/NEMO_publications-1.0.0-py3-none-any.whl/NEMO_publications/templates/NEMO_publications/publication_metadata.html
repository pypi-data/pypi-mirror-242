{% extends 'base.html' %}
{% load custom_tags_and_filters %}
{% load static %}
{% load tz %}
{% block title %}{% if form.instance.id %}Edit publication{% else %}Add publication{% endif %}{% endblock %}
{% block content %}
    {% with instance_id=form.instance.id %}
		<h1 class="form-group">{% if instance_id %}Edit publication{% else %}Create publication{% endif %}</h1>
        <form class="well" action="{% url 'save_publication_metadata' %}" method="post">
			{% csrf_token %}
            {% if form.non_field_errors %}
                <div class="alert alert-danger">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}
			<div class="form-group">
				<label for="doi">DOI</label>{% if form.doi.errors %} - <span style="color:red">{{ form.doi.errors|striptags }}</span>{% endif %}
				<input type="text" id="doi" name="doi" class="form-control" readonly value="{{ form.doi.value|default_if_none:"" }}" required>
			</div>
			<div class="form-group">
				<label for="title">Title</label>{% if form.title.errors %} - <span style="color:red">{{ form.title.errors|striptags }}</span>{% endif %}
				<input type="text" id="title" name="title" class="form-control"  value="{{ form.title.value|default_if_none:"" }}" required>
			</div>
			<div class="row form-group">
				<div class="col-md-6 col-sm-6">
					<label for="journal">Journal</label>
					<input type="text" id="journal" name="journal" class="form-control"  value="{{ form.journal.value|default_if_none:"" }}" required>
				</div>
				<div class="col-md-6 col-sm-6">
					<label for="year">Year</label>
					<input type="number" id="year" name="year" class="form-control"  value="{{ form.year.value|default_if_none:"" }}" required>
				</div>
			</div>
			{% if form.journal.errors or form.year.errors %}
				<div class="row">
					<div class="col-md-6 col-sm-6">{% if form.journal.errors %}<span style="color:red">{{ form.journal.errors|striptags }}</span>{% endif %}</div>
					<div class="col-md-6 col-sm-6">{% if form.year.errors %}<span style="color:red">{{ form.year.errors|striptags }}</span>{% endif %}</div>
				</div>
			{% endif %}
			<div class="form-group text-right">
                {% button type="save" value="Save Publication Information" %}
            </div>
		</form>
    {% endwith %}
{% endblock %}