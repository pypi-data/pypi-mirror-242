[LOCAL_SETUP]
FILE = templates/common/common.localsetup
PLATFORM = LOCAL

[REMOTE_SETUP]
FILE = templates/common/common.remotesetup
DEPENDENCIES = LOCAL_SETUP
WALLCLOCK = 02:00
PROCESSORS = 4
CUSTOM_DIRECTIVES = ["#SBATCH -p interactive"]

[INI]
FILE = templates/ifs3/ifs3.ini
DEPENDENCIES = REMOTE_SETUP
RUNNING = member
WALLCLOCK = 00:30
CUSTOM_DIRECTIVES = ["#SBATCH -p interactive"]

[SIM]
FILE = sources/runtime/autosubmit/ece-ifs.sh
DEPENDENCIES = INI SIM-1
RUNNING = chunk
WALLCLOCK = 01:00
PROCESSORS = 1728
TASKS = 48
THREADS = 1
CHECK = False

[POST]
FILE = templates/ifs3/ifs3.post
# Please add your correspond dependencies: CMORATM* CMORATM*+1
# CMORATM2 CMORATM2+1 CMORATM3 CMORATM3+1 CMORATM4 CMORATM4+1 CMORATM5 CMORATM5+1 CMORATM6 CMORATM6+1 CMORATM7 CMORATM7+1 CMORATM8 CMORATM8+1 CMORATM9 CMORATM9+1 CMORATM10 CMORATM10+1 CMORATM11 CMORATM11+1 CMORATM12 CMORATM12+1
DEPENDENCIES = SIM CMORATM1 CMORATM1+1
RUNNING = chunk
WALLCLOCK = 03:30


[CMORATM1]
#FILE = templates/ifs3/ifs3.cmoratm1
FILE = templates/common/common.cmoratm
DEPENDENCIES = SIM
WALLCLOCK = 24:00
RUNNING = chunk
CUSTOM_DIRECTIVES =  ["#SBATCH --cpus-per-task=4", "#SBATCH --tasks-per-node=8"]
NOTIFY_ON = RUNNING FAILED COMPLETED
THREADS = 8

[CLEAN]
FILE = templates/ifs3/ifs3.clean
DEPENDENCIES = POST CMORATM1+1 CMORATM1 
RUNNING = chunk
WALLCLOCK = 00:30

[CLEAN_MEMBER]
FILE = templates/ifs3/ifs3.clean_member
DEPENDENCIES = CLEAN 
RUNNING = member
WALLCLOCK = 00:10

[TRANSFER]
FILE = templates/common/common.localtrans
PLATFORM = transfer_node
DEPENDENCIES = CLEAN
RUNNING = chunk
FREQUENCY = 6
WAIT = true

[LOCALPOST]
FILE = templates/common/common.localpost
PLATFORM = moore
DEPENDENCIES = TRANSFER
RUNNING = chunk
WALLCLOCK = 05:00
FREQUENCY = 6

[PLOT]
FILE = templates/common/common.plot
PLATFORM = moore
DEPENDENCIES = LOCALPOST
RUNNING = chunk
WALLCLOCK = 00:30
FREQUENCY = 6
