[LOCAL_SETUP]
FILE = templates/common/common.localsetup
PLATFORM = LOCAL

[REMOTE_SETUP]
FILE = templates/common/common.remotesetup
DEPENDENCIES = LOCAL_SETUP
WALLCLOCK = 02:00
PROCESSORS = 4
CUSTOM_DIRECTIVES = ["#SBATCH -p interactive"]

[INI]
FILE = templates/nemo3/nemo3.ini
DEPENDENCIES = REMOTE_SETUP
RUNNING = member
WALLCLOCK = 00:30
CUSTOM_DIRECTIVES = ["#SBATCH -p interactive"]

[SIM]
FILE = sources/runtime/autosubmit/ece-nemo.sh
DEPENDENCIES = INI SIM-1
RUNNING = chunk
WALLCLOCK = 02:00
PROCESSORS = 1872
TASKS = 48
THREADS = 1
CHECK = False

[POST]
FILE = templates/nemo3/nemo3.post
DEPENDENCIES = SIM 
RUNNING = chunk
WALLCLOCK = 03:30
CUSTOM_DIRECTIVES = ["#SBATCH --exclusive"]

[CMOROCE]
FILE = templates/nemo3/nemo3.cmoroce
DEPENDENCIES = SIM
WALLCLOCK = 24:00
RUNNING = chunk
#NOTIFY_ON = RUNNING FAILED COMPLETED
CUSTOM_DIRECTIVES =  ["#SBATCH --cpus-per-task=4", "#SBATCH --tasks-per-node=8"]
THREADS = 8

[CLEAN]
FILE = templates/nemo3/nemo3.clean
DEPENDENCIES = POST CMOROCE
RUNNING = chunk
WALLCLOCK = 00:30

[CLEAN_MEMBER]
FILE = templates/nemo3/nemo3.clean_member
DEPENDENCIES = CLEAN 
RUNNING = member
WALLCLOCK = 00:10

[TRANSFER]
FILE = templates/common/common.localtrans
PLATFORM = LOCAL
DEPENDENCIES = CLEAN
RUNNING = chunk
FREQUENCY = 6
WAIT = true

[LOCALPOST]
FILE = templates/common/common.localpost
PLATFORM = moore
DEPENDENCIES = TRANSFER
RUNNING = chunk
WALLCLOCK = 05:00
FREQUENCY = 6

[PLOT]
FILE = templates/common/common.plot
PLATFORM = moore
DEPENDENCIES = LOCALPOST
RUNNING = chunk
WALLCLOCK = 00:30
FREQUENCY = 6
