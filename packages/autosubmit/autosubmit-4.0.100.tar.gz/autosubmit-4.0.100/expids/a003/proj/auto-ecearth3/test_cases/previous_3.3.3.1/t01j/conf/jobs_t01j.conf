[LOCAL_SETUP]
FILE = templates/common/common.localsetup
PLATFORM = transfer_node_bscearth000

[REMOTE_SETUP]
FILE = templates/common/common.remotesetup
DEPENDENCIES = LOCAL_SETUP
WALLCLOCK = 01:00
PROCESSORS = 18
TASKS = 18
THREADS = 1

[INI]
FILE = templates/nemo3/nemo3.ini
DEPENDENCIES = REMOTE_SETUP
RUNNING = member
WALLCLOCK = 00:30

[SIM]
FILE = sources/runtime/autosubmit/ece-nemo.sh
DEPENDENCIES = INI SIM-1 CLEAN-2
RUNNING = chunk
WALLCLOCK = 15:00
PROCESSORS = 1:336
THREADS = 1
TASKS = 1:36
CHECK = False

[CMOROCE]
FILE = templates/ecearth3/ecearth3.cmoroce
DEPENDENCIES = SIM
WALLCLOCK = 00:30
RUNNING = chunk
NOTIFY_ON = FAILED COMPLETED

# THREADS #
# -- MN4 --
#CUSTOM_DIRECTIVES = ["#SBATCH --cpus-per-task=4", "#SBATCH --constraint=highmem" ]
# ---------
# -- CCA --
THREADS = 4
# ---------
[POST]
FILE = templates/nemo3/nemo3.post
DEPENDENCIES = SIM CMOROCE
RUNNING = chunk
WALLCLOCK = 01:00

[CLEAN]
FILE = templates/nemo3/nemo3.clean
DEPENDENCIES = POST POST+1
RUNNING = chunk
WALLCLOCK = 01:00

[CLEAN_MEMBER]
FILE = templates/nemo3/nemo3.clean_member
DEPENDENCIES = CLEAN 
RUNNING = member
WALLCLOCK = 02:30

[TRANSFER]
FILE = templates/common/common.localtrans
PLATFORM = transfer_node_bscearth000
DEPENDENCIES = CLEAN
RUNNING = chunk
WALLCLOCK = 04:00
WAIT = true

[LOCALPOST]
FILE = templates/common/common.localpost
PLATFORM = moore
DEPENDENCIES = TRANSFER LOCALPOST-1
RUNNING = chunk
WALLCLOCK = 05:00

