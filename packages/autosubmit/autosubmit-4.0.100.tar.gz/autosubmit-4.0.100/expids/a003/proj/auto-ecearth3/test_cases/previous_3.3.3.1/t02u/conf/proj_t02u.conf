[DEFAULT]
#TODO:
#change naming convention to be consistent with config_run.xml


<Parameter name="FORCE_RUN_FROM_SCRATCH">
   <Description>Start simulation from scratch, possibly ignoring any restart files. [true/false]</Description>
   <Type>BOOLEAN</Type>
   <Value>false</Value>
</Parameter>


# AGCM grid resolution, horizontal (truncation T) and vertical (levels L).
# STRING = T159L62, T255L62, T255L91, T511L91, T799L62 (IFS)
IFS_resolution = T255L91

# OGCM grid resolution.
# STRING = ORCA1L46, ORCA1L75, ORCA025L46, ORCA025L75 (NEMO)
NEMO_resolution = ORCA1L75

# Number of parallel cores for AGCM component. NUMERIC.
# https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/mn4_cores
IFS_NUMPROC = 912

# Number of parallel cores for OGCM component. NUMERIC.
# https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/cores
NEM_NUMPROC = 288


# Number of parallel I/O servers for XIOS. NUMERIC = 1, 31.
# Only when using_server=true
XIO_NUMPROC = 47


[common]
MODEL = ecearth
# Version of the model 
# [used by ece2cmor, Earth diagnostics and selection of initial conditions]
# Used to point to the initial data (climatology etc) and 
# metadata of cmorized files
VERSION = v3.2.3
# the template name tell to auto-eceearth the type of the run you are
# running ecearth3, ifs3 or nemo3
TEMPLATE_NAME = ecearth3

# OUTCLASS
# Is a set of files used to setup the output of the models (IFS + NEMO)
# The reduced outclass is defined by default in all experiments.
# More information about the outclass in the readme.md file provided in the 
# outclass folder (/esarchive/autosubmit/<your_expid>/proj/auto-ecearth3/outclass)
# STRING: reduced, standard, primavera, dcpp, applicate,...
OUTCLASS = reduced

# After transferring output at /esarchive/exp remove a copy available at 
# permanent storage of HPC, [Default: Do set "TRUE"]. BOOLEAN = TRUE, FALSE
MODEL_output_remove = TRUE


[ece2cmor]
# Activate cmorization [Default = true]. BOOLEAN = true, false
ece2cmor=true
# Official name of cmor experiment (used in the metadata and file/directory 
# name of the cmorfiles). Must belong to control vocabulary described in
# https://github.com/jonseddon/cmip6-cmor-tables/blob/d6c5339a13f302bfa3bcdee667e30c21745ac2c5/Tables/CMIP6_CV.json 
# Most common ones are: vi , historical, spinup-1950...
CMOR_EXP=historical

[earthdiagnostics]
# tested with version ????. Check full documentation at 
# http://earthdiagnostics.readthedocs.io/en/v3.0.0rc2_a
# Diagnostics to run. Check complete list and options at
# http://earthdiagnostics.readthedocs.io/en/v3.0.0rc2_a/diagnostic_list.html
DIAGS =
# Default frequency for the diagnostics run (mon, day, 6h, 3hr ...)
# Some diagnostics will not use this (like monmean or daymean)
DIAGS_FREQ = mon
# Post-processing frequency (in hours) [Default: Do set "6"]. NUMERIC = 3, 6
NFRP = 6

[ioserver]

[ifs]

# Atmospheric initial conditions ready to be used. STRING = ID found here: 
# https://earth.bsc.es/wiki/doku.php?id=initial_conditions:atmospheric
# https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/creation-of-initial-conditions
ATM_ini =
# A different IC member per EXPID member ["all_members"] or which common IC 
# member for all EXPID members ["fc0" / "fc1"]. String = all_members/fc0/fc1...
ATM_ini_member =
# should we perturb the IC member online? This should not be used with
# ATM_ini_member = all_members . String = true/false
ATM_ini_member_perturb = false

# Choose RCP value [Default: Do set "2"]. 
# NUMERIC = 0, 1=3-PD, 2=4.5, 3=6, 4=8.5 
# TODO: ADD A CHECK ONLY VALID IN CMIP5
# 0 = historical =  before 2005
CMIP5_RCP = 0

# [Default: Do set "TRUE"]. BOOLEAN = TRUE, FALSE
LCMIP5 =
LCMIP6 =

# Volcanic forcing [Default: Do set "TRUE"]. BOOLEAN = TRUE, FALSE
LHVOLCA = TRUE
# Forcing [Default: Do set to "0" for time evolving forcing ]. 
# NUMERIC = 1850, 2005
NFIXYR = 0

# CMOR forcing. STRING = "Nat,Ant", historical, piControl, 1%CO2,...
FORCING =

# CMIP6 stratospheric aerosol forcing set to background value.
# Computed as the mean forcing over 1850-2014.
# Default FALSE.
# When NFIXYEAR is activated, this flag is forced to TRUE.
lcmip6_strataer_bckgd = false

# Save raw IFS  output or not [Default: Do set "false"]. BOOLEAN = true, false
SAVEGRIB = false
# Save reduced daily output or not [Default: Do set "false"]. 
# BOOLEAN = true, false
# SPPT stochastic physics active or not [Default: set "false"]. 
# BOOLEAN = true, false . 
# If set to true, specify other parameters in the IFS namelist
SPPT = false

# Atmospheric nudging towards reinterpolated ERA-Interim data. 
# BOOLEAN = true, false
# It is the user's responsibility to change the namelist if (s)he wants to 
# define a different region or layers in runtime/classic/ctrl/namelist.ifs*
ATM_NUDGING = false
# Atmospheric nudging reference data experiment name. [T255L91: b0ir]
ATM_refnud =
#
#<Model name="IFS">
#   <Parameter name="GRID">
#       <Description>Resolution of IFS grid</Description>
#       <Type>STRING</Type>
#       <Value>T255L91</Value>
#   </Parameter>
#   <Parameter name="NUMPROC">
#       <Description>Number of processors running IFS</Description>
#       <Type>INTEGER</Type>
#       <Value>64</Value>
#   </Parameter>
#
#   <Parameter name="CMIP6">
#       <Description>Use CMIP6 forcings (TRUE or FALSE)</Description>
#       <Type>BOOLEAN</Type>
#       <Value>TRUE</Value>
#   </Parameter>
#
#   <Parameter name="CMIP6_A4xCO2">
#       <Description>Use Abrupt4xCO2 in CMIP6 DECK (TRUE or FALSE)</Description>
#       <Type>BOOLEAN</Type>
#       <Value>FALSE</Value>
#   </Parameter>
#
#   <Parameter name="CMIP6_1PCTCO2">
#       <Description>Use 1pctCO2 in CMIP6 DECK (TRUE or FALSE)</Description>
#       <Type>BOOLEAN</Type>
#       <Value>FALSE</Value>
#   </Parameter>
#
#   <Parameter name="CMIP5">
#       <Description>Use CMIP5 forcings (TRUE or FALSE)</Description>
#       <Type>BOOLEAN</Type>
#       <Value>TRUE</Value>
#   </Parameter>
#
#   <Parameter name="CMIP5_RCP">
#       <Description>RCP selection (1-4 or 0 for historical run)</Description>
#       <Type>INTEGER</Type>
#       <Value>0</Value>
#   </Parameter>
#
#   <Parameter name="CMIP_FIXYEAR">
#       <Description>Fix CMIP5/CMIP6 forcings at the indicated year (or 0 to ignore for transient runs)</Description>
#       <Type>INTEGER</Type>
#       <Value>0</Value>
#   </Parameter>
#
#   <Parameter name="CMIP6PIAER">
#       <Description>Use prescribed preindustrial TM5 clim (TRUE or FALSE)</Description>
#       <Type>BOOLEAN</Type>
#       <Value>TRUE</Value>
#   </Parameter>
#
#   <Parameter name="MAC2SP">
#       <Description>Use MACv2 simple plume aerosol (TRUE or FALSE)</Description>
#       <Type>BOOLEAN</Type>
#       <Value>TRUE</Value>
#   </Parameter>



[nemo]

# Ocean initial conditions ready to be used. [Default: leave empty]. 
# STRING = ID 
# found here : https://earth.bsc.es/wiki/doku.php?id=initial_conditions:oceanic
OCEAN_ini =
# A different IC member per EXPID member ["all_members"]
# or which common IC member for all EXPID members ["fc0" / "fc1"].
# STRING = all_members/fc0/fc1...
OCEAN_ini_member =


# Computation of land-only subdomains
NEMO_remove_land = FALSE
# Ocean Advection Scheme [Default: Do set "tvd"]. STRING = tvd, cen2
ADVSCH = tvd
# Rebuild and store restarts to HSM for an immediate prediction 
# experiment. BOOLEAN = TRUE, FALSE
OCEAN_STORERST = FALSE
# Year of the forcing or -1 if same as run year. INTEGER = YYYY, -1
OCEAN_FORCYEAR = -1
# Forcing files. STRING = ERAINTERIM-ORCA1, DFS4.3
OCEAN_FORCTYPE = DFS4.3
# Surface Restoring activation. BOOLEAN = TRUE, FALSE.
# !!! WARNING !!! By default both sst and sss restoring are done.
# It is the user's responsibility to change the namelist if (s)he wants to
# activate a restoring for only one of them runtime/classic/ctrl/namelist.nemo*
SURF_RESTO = TRUE

# Toward which target surface variables are restored to; important 
#  if "SURF_RESTO" is set to TRUE. STRING = fa9p, s4, glorys2v1, myexp_resto
# A directory ${DATA_SURF_RESTO} must exist on MN4: 
# /gpfs/projects/bsc32/repository/surface_restoring/ocean/${DATA_SURF_RESTO}/${nem_grid}/${DATA_SURF_RESTO_member} containing the restoring files DATA_SURF_RESTO = myexp_resto
# A different DATA_SURF_RESTO member per EXPID member ["all_members"] 
# or which common DATA_SURF_RESTO member for all EXPID members ["fc0" / "fc1"].
# STRING = all_members/fc0/fc1..
DATA_SURF_RESTO_member = fc0
# Nudging activation. BOOLEAN = TRUE, FALSE
# !!! WARNING !!! By default both temperature and salinity nudging are done.
# It is the user's responsibility to change the namelist if he wants to 
# activate a nudging for only one of them runtime/classic/ctrl/namelist.nemo*
OCEAN_NUDGING = false
# Towards which target ocean is nudged; 
# Important: Only takes effect if "OCEAN_NUDGING" is set to TRUE. 
# STRING = fa9p, s4, glorys2v1, myexp_nudg
# A directory ${DATA_OCE_NUDG} must exist on the HPC
# https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/data 
# /gpfs/projects/bsc32/repository/nudging/ocean/${DATA_OCE_NUDG}/${nem_grid}/${DATA_OCE_NUDG_member}/ containing the nudging files
DATA_OCE_NUDG = s4
# A different DATA_OCE_NUDG member per EXPID member ["all_members"] or
# which common DATA_OCE_NUDG member for all EXPID members ["fc0" / "fc1"]. 
# String = all_members/fc0/fc1..
DATA_OCE_NUDG_member = fc0


[ice]
# Sea-Ice Model [Default: Do set "LIM2"]. STRING = LIM2, LIM3
ICE = LIM3
# Sea-ice initial conditions ready to be used. [Default: leave empty]. 
# STRING = ID 
# found here : https://earth.bsc.es/wiki/doku.php?id=initial_conditions:oceanic
ICE_ini =
# A different IC member per EXPID member ["all_members"] or which common IC
# member for all EXPID members ["fc0" / "fc1"]. String = all_members/fc0/fc1...
ICE_ini_member =

[pisces]
# Activate PISCES. BOOLEAN = true, false
PISCES = false
# PISCES initial conditions ready to be used. [Default: leave empty]. 
# STRING = ID 
# found here : https://earth.bsc.es/wiki/doku.php?id=initial_conditions:biogeochemistry
PISCES_ini =


[lpjg]
# LPJ-Guess (LPJG) dynamic vegetation model, used in the ece-esm.sh (ESM model)
# and ece-lsm.sh (offline land surface model) runscripts
# For more information see https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/earth-system-model
# Activate LPJG, STRING = FALSE/[empty]/TRUE [Default: FALSE]
LPJG = FALSE
# LPJG config, choose one of lpjg (feedback off) or lpjg:fdbck (feedback on)
LPJG_CONFIG = lpjg:fdbck
# number of processors to use for LPJG
# on MN4 20 is sufficient for ece-esm.sh but this has not been optimized yet, 
# for the ece-lsm.sh script use a value of 30
# on CCA 10 is the recommended value, spread over 2 nodes
LPJG_NUMPROC = 20


#<Model name="LPJG">
#
#   <Parameter name="TIME_STEP_SEC">
#       <Description>LPJ-GUESS time step in seconds</Description>
#       <Type>INTEGER</Type>
#       <Value>86400</Value>
#   </Parameter>
#
#
#   <Parameter name="CMIP5_RCP">
#       <Description>RCP selection (RCP26, RCP45, RCP60, RCP85 or hist)</Description>
#       <Type>STRING</Type>
#       <Value>RCP60</Value>
#   </Parameter>
#
#   <Parameter name="LPJG_FIXNDEPAFTER">
#       <Description>Fix N-Deposition from (>=0: year, -1:off)</Description>
#       <Type>INTEGER</Type>
#       <Value>-1</Value>
#   </Parameter>
#
#   <Parameter name="LPJG_FIXLUAFTER">
#       <Description>Fix Land-Use from (>=0: year, -1:off)</Description>
#       <Type>INTEGER</Type>
#       <Value>-1</Value>
#   </Parameter>
#</Model>



[save_ic]
# Save initial conditions during the run. For more information see
# https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/creation-of-initial-conditions
# Activate saving of ICs [Default: leave empty]
# STRING = FALSE/[empty] (do not save ICs), 
# TRUE/custom (specify offset and condition below), 
# end_leg (save ICs at the end of every leg), 
# end_run (save ICs at the end of the run)
SAVE_IC = FALSE
# if SAVE_IC=custom specify an offset from chunk start date for each date, 
# enclosed by "" e.g. :
SAVE_IC_OFFSET = "+1 month" "+4 month" "+ 7 month" "+ 10 month" "+ 12 month"
# if SAVE_IC=custom optionally specify a condition (in bash syntax) to save 
# ICs for current chunk, if left empty ICs will be saved every chunk
# e.g. (( run_num_legs%10 == 0 )) to save ICs every 10 chunks
#SAVE_IC_COND = (( run_num_legs%10 == 0 ))
# should we copy the IC files to repository in $HSM_DIR/ic (default false) ?
# if set to FALSE, IC files will be stored in exp folder in the ic/ directory
SAVE_IC_REPOS = true


[TM5]
#
# <Parameter name="ISTART">
#       <Description>TM5 initial tracer fields option (2,5,9,31,32, or 33)</Description>
#       <Type>INTEGER</Type>
#       <Value>33</Value>
#   </Parameter>
#
#   <Parameter name="TIME_STEP_SEC">
#       <Description>TM5 time step in seconds</Description>
#       <Type>INTEGER</Type>
#       <Value>3600</Value>
#   </Parameter>
#
#   <Parameter name="NUMPROC_X">
#       <Description>Number of processors in the X direction running TM5 (max 4)</Description>
#       <Type>INTEGER</Type>
#       <Value>2</Value>
#   </Parameter>
#
#   <Parameter name="NUMPROC_Y">
#       <Description>Number of processors in the Y direction running TM5 (max 45)</Description>
#       <Type>INTEGER</Type>
#       <Value>45</Value>
#   </Parameter>
#
#   <Parameter name="CMIP5_RCP">
#       <Description>RCP selection (RCP26, RCP45, RCP60, RCP85 or hist [pre-2000])</Description>
#       <Type>STRING</Type>
#       <Value>hist</Value>
#   </Parameter>
#
#   <Parameter name="EMISS_FIXYEAR">
#       <Description>Fix EMISSIONS at the indicated year (or 0 to ignore)</Description>
#       <Type>INTEGER</Type>
#       <Value>0</Value>
#   </Parameter>

[ECE3-POSTPROC]
# ECE3-POSTPROC is a suite of post-processing tools for EC-Earth 3. It includes HIRESCLIM2 (extract and avergae variables
# of interest), ECMEAN (compute global mean fluxes), TIMESERIES (plot timseries) and AMWG (diagnostic tool). More
# information can be found at https://github.com/plesager/ece3-postproc.

ECE3_POSTPROC = false