[LOCAL_SETUP]
FILE = templates/common/common.localsetup
PLATFORM = LOCAL
CHECK = true

[SYNCHRONIZE]
FILE = templates/common/common.synchronize.sh
PLATFORM = transfer_node_bscearth000
DEPENDENCIES = LOCAL_SETUP
WALLCLOCK = 00:30
CHECK = true

[REMOTE_SETUP]
FILE = sources/runtime/autosubmit/compilation.sh
DEPENDENCIES = SYNCHRONIZE
WALLCLOCK = 2:00
PROCESSORS = 18
TASKS = 18
THREADS = 1
CHECK = true

[INI]
FILE = templates/common/common.ini
DEPENDENCIES = REMOTE_SETUP
RUNNING = member
WALLCLOCK = 00:30
CHECK = true

[SIM]
FILE = sources/runtime/autosubmit/ece-esm.sh
DEPENDENCIES = INI SIM-1
RUNNING = chunk
WALLCLOCK = 01:00
#PROCESSORS = 504
PROCESSORS = 1:1:288:144
TASKS = 1:1:36:36
THREADS = 1
CHECK = on_submision

[CMOROCE]
FILE = templates/common/common.cmoroce
DEPENDENCIES = SIM SIM+1
WALLCLOCK = 2:00
RUNNING = chunk
NOTIFY_ON = RUNNING FAILED COMPLETED
TASKS = 8
THREADS = 4
CHECK = true

[CMORATM]
FILE = templates/common/common.cmoratm
DEPENDENCIES = SIM SIM+1
WALLCLOCK = 2:00
RUNNING = chunk
THREADS = 4
NOTIFY_ON = FAILED COMPLETED
TASKS = 8
CHECK = true

#[CMORVEG]
#FILE = templates/common/common.cmorveg
#DEPENDENCIES = SIM SIM+1
#WALLCLOCK = 2:00
#RUNNING = chunk
#NOTIFY_ON = RUNNING FAILED COMPLETED
#CUSTOM_DIRECTIVES =  ["#SBATCH --exclusive"]
#QUEUE = debug
#CHECK = true

[POST]
FILE = templates/ecearth3/ecearth3.post
DEPENDENCIES = CMOROCE CMORATM
RUNNING = chunk
WALLCLOCK = 01:00
CHECK = true

#CMORATM needs the data from the previous month of the SIM
[CLEAN]
FILE = templates/ecearth3/ecearth3.clean
DEPENDENCIES = POST
RUNNING = chunk
WALLCLOCK = 00:30
CHECK = true

#[SAVEIC]
#FILE = templates/common/common.saveic
#DEPENDENCIES = SIM
#RUNNING = chunk
#WALLCLOCK = 00:30
#CHECK = true

[CLEAN_MEMBER]
FILE = templates/common/common.clean_member
DEPENDENCIES = CLEAN
#DEPENDENCIES = CLEAN SAVEIC
RUNNING = member
WALLCLOCK = 02:00
CHECK = true

[TRANSFER]
FILE = templates/common/common.localtrans
PLATFORM = transfer_node_bscearth000
DEPENDENCIES = CLEAN
RUNNING = chunk
CHECK = true

#[PERFORMANCE_METRICS]
#FILE = templates/ecearth3/ecearth3.performance_metrics.sh
#DEPENDENCIES = TRANSFER
#RUNNING = once
#WALLCLOCK = 00:10
#PROCESSORS = 1
#PLATFORM = LOCAL
#CHECK = true

[TRANSFER_MEMBER]
FILE = templates/common/common.transfer_member
PLATFORM = transfer_node_bscearth000
DEPENDENCIES = CLEAN_MEMBER
RUNNING = member
CHECK = true

#[LOCALPOST]
#FILE = templates/common/common.localpost
#PLATFORM = moore
#DEPENDENCIES = TRANSFER LOCALPOST-1
#RUNNING = member
#WALLCLOCK = 05:00
#CHECK = true
#
