[common]
# No need to change.
MODEL = ecearth
# No need to change.
VERSION = v3.3.0
# No need to change.
TEMPLATE_NAME = ecearth3

# Select the model output control class.
# if both outclass are empty the classic/ctl outclass will be used
# see auto-ecearth3/outclass folder.
BSC_OUTCLASS = reduced
# see: "runtime/classic/ctrl/cmip6-output-control-files"
# e.g. CMPI6_OUTCLASS = CMIP/EC-EARTH-AOGCM/cmip6-experiment-CMIP-piControl
CMIP6_OUTCLASS =

# After transferring output at /esarchive/exp remove a copy available at permanent storage of HPC [Default: Do set "TRUE"]. BOOLEAN = TRUE, FALSE
MODEL_output_remove = TRUE
# Model ID for cmorization
MODEL_ID = EC-Earth3-LR
# Activate cmorization [Empty = TRUE]. BOOLEAN = TRUE, FALSE
CMORIZATION = TRUE
# Supply the name of the experiment associated (if there is any) otherwise leave it empty. STRING (with space) = seasonal r1p1, seaiceinit r?p?
ASSOCIATED_EXPERIMENT = 
# Essential if cmorization is activated (Forcing). STRING = Nat,Ant (Nat and Ant is a single option)
FORCING =
# Delete run dir folder on inicialization step. BOOLEAN = TRUE, FALSE 
DELETE_RUN_DIR_ON_INI = false
DELETE_INI_DIR_ON_INI = TRUE

# Model resolution (used in the metadata and file/directory name of the cmorfiles). STRING: HR, LR
MODEL_RES = LR

ADD_PROJECT_TO_HOST = false

# The keyword long_term_archiving is used to differentiate "important" experiments
# used for "production", deliverables, papers etc... and then should be kept in the
# long term from debug/development experiments (that could be deleted after some time)
# BOOLEAN = TRUE, FALSE
LONG_TERM_ARCHIVING = FALSE

# The keyword allow_custom_cmor_exp indicates if the experiment belongs to an official
# project and has to be officially shared/cmorized and then complies with the official
# MIP tables. If set to False, whatever CMOR_EXP will be accepted
#
# BOOLEAN = TRUE, FALSE
ALLOW_CUSTOM_CMOR_EXP = FALSE

# Official name of cmor experiment (used in the metadata and file/directory name of the cmorfiles). Must belong to control vocabulary described in https://github.com/jonseddon/cmip6-cmor-tables/blob/d6c5339a13f302bfa3bcdee667e30c21745ac2c5/Tables/CMIP6_CV.json . Most common ones are: piControl, historical, spinup-1950... 
CMOR_EXP = historical

# In case of the need for non consecutive realizations in the ripf of cmor files, supply a list of integers associated to each member. Must have the same length as MEMBERS or can be left empty. LIST = 3 9 10 220
CMOR_REALIZATION_INDEX = 

CMOR_ADD_STARTDATE = true
# If false allows modification of the CMOR tables to add non standard experiment names [Empty = False ] BOOLEAN = TRUE, FALSE
PRODUCTION_EXP = false

[diagnostics]
# Diagnostics to run
DIAGS =
# Default frequency for the diagnostics run (mon, day, 6h)
DIAGS_FREQ = mon

#CMOR format in which the Earth diagnostics will be produced. STRING: PRIMAVERA, SPECS, CMIP5
DATA_CONVENTION = PRIMAVERA

#Type of the project (used in cmorization to define the type of outputs produced by the model and how to convert them). STRING: PRIMAVERA,  STANDARD
PROJ_TYPE = STANDARD

# Activate or deactivate ece3-postproc. [Empty = TRUE]. BOOLEAN = TRUE, FALSE
# also the diagnostics will be perform only if you simulation start Jan 1st and finish Dec 21
ECE3_POSTPROC = FALSE

[grid]
# AGCM grid resolution, horizontal (truncation T) and vertical (levels L). STRING = T159L62, T255L62, T255L91, T511L91, T799L62 (IFS)
IFS_resolution = T255L91
# OGCM grid resolution. STRING = ORCA1L46, ORCA1L75, ORCA025L46, ORCA025L75 (NEMO)
NEMO_resolution = ORCA1L75

[oasis]
# Coupler (OASIS) options.
OASIS3 = yes
# Number of pseduo-parallel cores for coupler [Default: Do set "7"]. NUMERIC = 1, 7, 10
OASIS_nproc =
# Handling the creation of coupling fields dynamically [Default: Do set "TRUE"]. BOOLEAN = TRUE, FALSE 
OASIS_flds =

[ioserver]
# Number of parallel I/O servers for XIOS. Only when using_server=true
XIO_NUMPROC = 1

[ifs]
# Atmospheric initial conditions ready to be used. STRING = ID found here :  	https://earth.bsc.es/wiki/doku.php?id=initial_conditions:atmospheric
ATM_ini = cmip6hist
# A different IC member per EXPID member ["PERT"] or which common IC member for all EXPID members ["fc0" / "fc1"]. String = PERT/fc0/fc1...
ATM_ini_member = fc01
# Do you want to perturb the IC. TRUE, FALSE
ATM_ini_member_perturb = FALSE
# Number of parallel cores for AGCM component. NUMERIC = 28, 100
IFS_NUMPROC = 288
# Post-procssing frequency (in hours) [Default: Do set "6"]. NUMERIC = 3, 6
NFRP = 6
# [Default: Do set "TRUE"]. BOOLEAN = TRUE, FALSE
LCMIP5 = 
# Choose RCP value [Default: Do set "2"]. NUMERIC = 0, 1=3-PD, 2=4.5, 3=6, 4=8.5
NRCP = 
# [Default: Do set "TRUE"]. BOOLEAN = TRUE, FALSE
LHVOLCA = TRUE
# [Default: Do set "0"]. NUMERIC = 1850, 2005
NFIXYR = 0
# Save daily output or not [Default: Do set "FALSE"]. BOOLEAN = TRUE, FALSE
SAVEDDA = FALSE
# Save reduced daily output or not [Default: Do set "FALSE"]. BOOLEAN = TRUE, FALSE
ATM_REDUCED_OUTPUT = 
# Store grib codes from SH files [User need to refer defined  ppt* files for the experiment]
ATM_SH_CODES =
# Store levels against "ATM_SH_CODES" e.g: level1,level2,level3, ...
ATM_SH_LEVELS =
# Store grib codes from GG files [User need to refer defined  ppt* files for the experiment]
ATM_GG_CODES =
# Store levels against "ATM_GG_CODES" (133.128, 246.128, 247.128, 248.128) e.g: level1,level2,level3, ...
ATM_GG_LEVELS =
# SPPT stochastic physics active or not [Default: set "FALSE"]. BOOLEAN = TRUE, FALSE
LSPPT = FALSE
# Write the perturbation patterns for SPPT or not [Default: set "FALSE"]. BOOLEAN = TRUE, FALSE
LWRITE_ARP =
# Number of scales for SPPT [Default: set 3]. NUMERIC = 1, 2, 3
NS_SPPT =
# Standard deviations of each scale [Default: set 0.50,0.25,0.125] NUMERIC values separated by ,
SDEV_SPPT =
# Decorrelation times (in seconds) for each scale [Default: set 2.16E4,2.592E5,2.592E6] NUMERIC values separated by ,
TAU_SPPT =
# Decorrelation lengths (in meters) for each scale [Default: set 500.E3,1000.E3,2000.E3] NUMERIC values separated by ,
XLCOR_SPPT =
# Clipping ratio (number of standard deviations) for SPPT [Default: set 2] NUMERIC
XCLIP_SPPT =
# Stratospheric tapering in SPPT [Default: set "TRUE"]. BOOLEAN = TRUE, FALSE
LTAPER_SPPT =
# Top of stratospheric tapering layer in Pa [Default: set to 50.E2] NUMERIC
PTAPER_TOP =
# Bottom of stratospheric tapering layer in Pa [Default: set to 100.E2] NUMERIC
PTAPER_BOT =
## ATMOSPHERIC NUDGING PARAMETERS ##
# Atmospheric nudging towards reinterpolated ERA-Interim data. BOOLEAN = TRUE, FALSE
ATM_NUDGING = FALSE
# Atmospheric nudging reference data experiment name. [T255L91: b0ir]
ATM_refnud =
# Nudge vorticity. BOOLEAN = TRUE, FALSE
NUD_VO =
# Nudge divergence. BOOLEAN = TRUE, FALSE
NUD_DI =
# Nudge temperature. BOOLEAN = TRUE, FALSE
NUD_TE =
# Nudge specific humidity. BOOLEAN = TRUE, FALSE
NUD_Q =
# Nudge liquid water content. BOOLEAN = TRUE, FALSE
NUD_QL =
# Nudge ice water content. BOOLEAN = TRUE, FALSE
NUD_QI =
# Nudge cloud fraction. BOOLEAN = TRUE, FALSE
NUD_QC =
# Nudge log of surface pressure. BOOLEAN = TRUE, FALSE
NUD_LP =
# Relaxation coefficient for vorticity. NUMERIC in ]0,inf[; 1 means half way between model value and ref value
ALPH_VO =
# Relaxation coefficient for divergence. NUMERIC in ]0,inf[; 1 means half way between model value and ref value
ALPH_DI =
# Relaxation coefficient for temperature. NUMERIC in ]0,inf[; 1 means half way between model value and ref value
ALPH_TE =
# Relaxation coefficient for specific humidity. NUMERIC in ]0,inf[; 1 means half way between model value and ref value
ALPH_Q =
# Relaxation coefficient for log surface pressure. NUMERIC in ]0,inf[; 1 means half way between model value and ref value
ALPH_LP =
# Nudging area Northern limit [Default: Do set "90"]
NUD_NLAT =
# Nudging area Southern limit [Default: Do set "-90"]
NUD_SLAT =
# Nudging area Western limit NUMERIC in [0,360] [Default: Do set "0"]
NUD_WLON =
# Nudging area Eastern limit NUMERIC in [0,360] [Default: Do set "360"; E<W will span Greenwich]
NUD_ELON =
# Nudging vertical levels : lower level [Default: Do set "1"]
NUD_VMIN =
# Nudging vertical levels : upper level [Default: Do set to number of vertical levels]
NUD_VMAX =

# Vegetation fields for tuning and 21st century climate change scenarios https://dev.ec-earth.org/issues/436
# STRING: era20c, custom [default] or ifs (mandatory for T511)
IFS_VEG_SOURCE = ifs

[nemo]
# Ocean initial conditions ready to be used. [Default: leave empty]. STRING = ID found here : https://earth.bsc.es/wiki/doku.php?id=initial_conditions:oceanic
OCEAN_ini = cmip6hist
# A different IC member per EXPID member ["PERT"] or which common IC member for all EXPID members ["fc0" / "fc1"]. String = PERT/fc0/fc1...
OCEAN_ini_member = fc01
# Number of parallel cores for OGCM component. NUMERIC = 16, 24, 36
NEM_NUMPROC = 144
# Avoid computation of land-only subdomains BOOLEAN = TRUE, FALSE
NEMO_remove_land = TRUE
# Ocean Advection Scheme [Default: Do set "tvd"]. STRING = tvd, cen2
ADVSCH = tvd
# Surface Restoring activation. BOOLEAN = TRUE, FALSE.
# !!! WARNING !!! By default both sst and sss restoring are done.
# It is the user's responsibility to change the namelist if he wants to activate a restoring for only one of them
SURF_RESTO = FALSE
# Toward which target surface variables are restored to; important if "SURF_RESTO" is set tot TRUE. STRING = fa9p, s4, glorys2v1, myexp_resto
# A directory ${DATA_SURF_RESTO} must exist in /gpfs/projects/bsc32/repository/surface_restoring/ocean/${DATA_SURF_RESTO}/${nem_grid}/${DATA_SURF_RESTO_member} containing the restoring files
DATA_SURF_RESTO = 
# A different DATA_SURF_RESTO member per EXPID member ["PERT"] or which common DATA_SURF_RESTO member for all EXPID members ["fc0" / "fc1"]. String = PERT/fc0/fc1..
DATA_SURF_RESTO_member = 
# Nudging activation. BOOLEAN = TRUE, FALSE
# !!! WARNING !!! By default both temperature and salinity nudging are done.
# It is the user's responsibility to change the namelist if he wants to activate a nudging for only one of them
OCE_NUDG = FALSE
# Toward which target ocean is nuged to; essential if "OCE_NUDG" is TRUE. STRING = fa9p, s4, glorys2v1, myexp_nudg
# A directory ${DATA_OCE_NUDG} must exist in /gpfs/projects/bsc32/repository/nudging/ocean/${DATA_OCE_NUDG}/${nem_grid}/${DATA_OCE_NUDG_member} containing the restoring files
DATA_OCE_NUDG =  
# A different DATA_OCE_NUDG member per EXPID member ["PERT"] or which common DATA_SURF_RESTO member for all EXPID members ["fc0" / "fc1"]. String = PERT/fc0/fc1..
DATA_OCE_NUDG_member = 
# Rebuild and store restarts to HSM for an immediate prediction experiment. BOOLEAN = TRUE, FALSE
OCEAN_STORERST = FALSE
# Year of the forcing or -1 if same as run year. INTEGER = YYYY, -1
OCEAN_FORCYEAR = -1

[ice]
# Sea-Ice Model [Default: Do set "LIM2"]. STRING = LIM2, LIM3
ICE = LIM3
# Sea-ice initial conditions ready to be used. [Default: leave empty]. 
# STRING = ID 
# found here : https://earth.bsc.es/wiki/doku.php?id=initial_conditions:sea_ice
ICE_ini = cmip6hist
# A different IC member per EXPID member ["PERT"] or which common IC member for all EXPID members ["fc0" / "fc1"]. String = PERT/fc0/fc1...
ICE_ini_member = fc01

[pisces]
# Activate PISCES. BOOLEAN = TRUE, FALSE
PISCES = FALSE
# PISCES initial conditions ready to be used. [Default: leave empty]. STRING = ID found here : https://earth.bsc.es/wiki/doku.php?id=initial_conditions:biogeochemistry
PISCES_ini = 
# A different IC member per EXPID member ["PERT"] or which common IC member for all EXPID members ["fc0" / "fc1"]. String = PERT/fc0/fc1...
PISCES_ini_member =  

PISCES_OFF = FALSE
#Dynamical fields need for PISCES to run OFFLINE. Here the ID of the exp must be specified. the fi
les are located in:/esarchive/releases/dynamical_fields/expID
# the user must  WRITE manually the right dinamical fields  
PISCES_OFF_DYN= 

[save_ic]
# Save initial conditions during the run. For more information see
# https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/creation-of-initial-conditions
# Activate saving of ICs [Default: leave empty]
# STRING = FALSE/[empty] (do not save ICs), 
# TRUE/custom (specify offset and condition below), 
# end_leg (save ICs at the end of every leg), 
# end_run (save ICs at the end of the run)
SAVE_IC = FALSE
# if SAVE_IC=custom specify an offset from chunk start date for each date, 
# enclosed by "" e.g. :
SAVE_IC_OFFSET = "+1 month" "+4 month" "+ 7 month" "+ 10 month" "+ 12 month"
# if SAVE_IC=custom optionally specify a condition (in bash syntax) to save 
# ICs for current chunk, if left empty ICs will be saved every chunk
# e.g. (( run_num_legs%10 == 0 )) to save ICs every 10 chunks
#SAVE_IC_COND = (( run_num_legs%10 == 0 ))
# should we copy the IC files to repository in $HSM_DIR/ic (default false) ?
# if set to false, IC files will be stored in exp folder in the ic/ directory
# WARNING!! only lower case allowed !!!
SAVE_IC_REPOS = true

[ECMWF_SYNCHRONIZATION]
# For more information about how to use this feature, please check the following wiki section:
# https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/proj_EXPID.conf#ecmwf_synchronization
# by default true, this will enable/disable both the SCP/RSYNC in LOCAL_SETUP (now called SYNC) and the extract/copy_ctrl in REMOTE_SETUP (compilation.sh)
UPDATE_MODEL = TRUE
# by default true, this will enable/disable the untar of the .tar file
MODEL_EXTRACT = TRUE
# use dt machine to tar/get the model ( usually faster ) - note you need to have proper ssh keys configured to use this feature (check wiki section above)
USE_DT_MACHINE = TRUE
# Credentials of DT machine to tar/pull the model to the ecmwf-x40 host (faster option)
DT_HOST = dt01.bsc.es
DT_USER = bsc32130
