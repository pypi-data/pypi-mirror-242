;[LOCAL_SETUP]
;FILE = templates/localsetup.tmpl.sh
;PLATFORM = LOCAL
;CHECK = true
;NOTIFY_ON = FAILED
;
;[SYNCHRONIZE]
;FILE = templates/synchronize.tmpl.sh
;PLATFORM = meluxina_data_transfer
;DEPENDENCIES = LOCAL_SETUP
;CHECK = true
;NOTIFY_ON = FAILED
;WALLCLOCK = 0:30
;
;[REMOTE_SETUP]
;FILE = sources/runtime/autosubmit/compilation.sh
;EXECUTABLE = /bin/bash -l
;DEPENDENCIES = SYNCHRONIZE
;WALLCLOCK = 2:00
;PROCESSORS = 12
;CUSTOM_DIRECTIVES = ["#SBATCH -N 1", "#SBATCH --hint=nomultithread"]
;CHECK = true
;NOTIFY_ON = FAILED
;
;[INI]
;FILE = templates/ini.tmpl.sh
;EXECUTABLE = /bin/bash -l
;CUSTOM_DIRECTIVES = ["#SBATCH -N 1", "#SBATCH --hint=nomultithread"]
;DEPENDENCIES = REMOTE_SETUP
;RUNNING = member
;WALLCLOCK = 00:30
;CHECK = true
;NOTIFY_ON = FAILED

[SIM]
FILE = sources/runtime/autosubmit/ece-esm.sh
EXECUTABLE = /bin/bash -l
DEPENDENCIES = INI SIM-1 CLEAN-20 NCTIME-20
RUNNING = chunk
WALLCLOCK = 1:30
PROCESSORS = 1280
THREADS = 1
CUSTOM_DIRECTIVES = "[#SBATCH -N 10, #SBATCH --hint=nomultithread"]"
#CUSTOM_DIRECTIVES = ["#SBATCH -N 1"]
CHECK = on_submission
PLATFORM = marenostrum4
;
;[CMOROCE]
;FILE = templates/cmor.tmpl.sh
;DEPENDENCIES = SIM
;EXECUTABLE = /bin/bash -l
;WALLCLOCK = 1:00
;RUNNING = chunk
;NOTIFY_ON = FAILED
;THREADS = 8
;CUSTOM_DIRECTIVES = ["#SBATCH -N 1", "#SBATCH --hint=nomultithread"]
;CHECK = true
;
;[CMORATM]
;FILE = templates/cmor.tmpl.sh
;DEPENDENCIES = SIM SIM+1
;EXECUTABLE = /bin/bash -l
;WALLCLOCK = 2:00
;RUNNING = chunk
;THREADS = 8
;CUSTOM_DIRECTIVES = ["#SBATCH -N 1", "#SBATCH --hint=nomultithread"]
;CHECK = true
;
;[POST]
;FILE = templates/post.tmpl.sh
;EXECUTABLE = /bin/bash -l
;#PLATFORM = nord3v2
;DEPENDENCIES = CMORATM CMORATM+1 CMOROCE SAVEIC SIM SIM+1 POST-1
;RUNNING = chunk
;WALLCLOCK = 01:00
;## when using the classic outclass make sure you are running POST in exclusive mode (for MN4): CUSTOM_DIRECTIVES = ["#SBATCH --exclusive"]
;#THREADS = 8
;CHECK = true
;CUSTOM_DIRECTIVES = ["#SBATCH -N 1", "#SBATCH --hint=nomultithread"]
;NOTIFY_ON = FAILED
;
;[CLEAN]
;FILE = templates/clean.tmpl.sh
;PLATFORM = meluxina_data_transfer
;DEPENDENCIES = CLEAN POST SIM SIM+1 CMOROCE CMORATM CMORATM+1
;SELECT_CHUNKS = CLEAN*[1]*[2:]
;RUNNING = chunk
;WALLCLOCK = 00:30
;CHECK = true
;NOTIFY_ON = FAILED
;
;[EARTHDIAGS]
;FILE = templates/earthdiags.tmpl.sh
;PLATFORM = nord3v2
;DEPENDENCIES = CLEAN
;RUNNING = chunk
;WALLCLOCK = 01:00
;QUEUE = debug
;CHECK = true
;NOTIFY_ON = FAILED
;
;#[MONITOR]
;#FILE = templates/monitor.tmpl.py
;#PLATFORM = nord3v2
;#DEPENDENCIES = MONITOR-5 CLEAN ESMVALTOOL EARTHDIAGS
;#FREQUENCY = 5
;#RUNNING = chunk
;#WALLCLOCK = 01:00
;#CHECK = true
;#TYPE = python
;#EXECUTABLE = %PROJDIR%/es-esmvaltool/common-tools/auto-ecearth/nord3v2_launcher
;#PROCESSORS = 4
;#NOTIFY_ON = FAILED
;
;[SAVEIC]
;FILE = templates/saveic.tmpl.sh
;EXECUTABLE = /bin/bash -l
;DEPENDENCIES = SIM
;RUNNING = chunk
;WALLCLOCK = 00:40
;CHECK = true
;CUSTOM_DIRECTIVES = ["#SBATCH -N 1", "#SBATCH --hint=nomultithread"]
;THREADS = 12
;NOTIFY_ON = FAILED
;
;[CLEAN_MEMBER]
;FILE = templates/clean_member.tmpl.sh
;PLATFORM = meluxina_data_transfer
;DEPENDENCIES = CLEAN PERFORMANCE_METRICS SAVEIC
;RUNNING = member
;WALLCLOCK = 02:00
;CHECK = true
;NOTIFY_ON = FAILED
;
;#[PERFORMANCE_METRICS]
;#FILE = templates/performance_metrics.tmpl.sh
;#DEPENDENCIES = CLEAN
;#RUNNING = once
;#PROCESSORS = 1
;#PLATFORM = LOCAL
;#CHECK = true
;#NOTIFY_ON = FAILED
;
;[TRANSFER_MEMBER]
;FILE = templates/transfer_member.tmpl.sh
;PLATFORM = transfer_node_bscearth000
;DEPENDENCIES = CLEAN_MEMBER
;RUNNING = member
;CHECK = true
;NOTIFY_ON = FAILED
;
;[NCTIME]
;FILE = templates/nctime.tmpl.sh
;PLATFORM = nord3v2
;DEPENDENCIES = NCTIME-1 CLEAN CLEAN-1 CLEAN-2 CLEAN-3
;RUNNING = chunk
;FREQUENCY = 20
;CHECK = true
;WALLCLOCK = 02:30
;NOTIFY_ON = FAILED
;
;[CLEAN_EXPERIMENT]
;FILE = templates/clean_experiment.tmpl.sh
;DEPENDENCIES = NCTIME TRANSFER_MEMBER EARTHDIAGS
;PLATFORM = meluxina_data_transfer
;RUNNING = once
;WALLCLOCK = 00:30
;CHECK = true
;NOTIFY_ON = FAILED
