[monarch]
#-----------------------------------------------------------------------
# Compute tasks definition (also change in jobs.conf)!
#-----------------------------------------------------------------------
# Number inpes (compute tasks in the I direction)
INPES 			= 16
# Number jnpes (compute tasks in the J direction)
JNPES 			= 16
# Number write tasks
WRTSK 			= 4
# Make sure to change PROCESSORS (must be equal to INPES*JNPES+WRTSK) under [SIM] section in jobs_$EXPID.conf

#-----------------------------------------------------------------------
# Model domain setup
#-----------------------------------------------------------------------
# Type of simulation
MODE = GLOBAL_AEROSOLS
# Name of the case (MEMBER will hang from CASE in paths)
CASE 			= GLOB
# Run time step (integer seconds)
DT_INT 			= 90
# Center point longitudinal (E/W)
TLM0D			= 0.0
# Center point latitudinal (S/N)
TPH0D			= 0.0
# Western boundary (from center point)
WBD				= -180.0
# Southern boundary (from center point)
SBD 			= -90.0
# Longitudinal grid resolution
DLMD 			= 0.703125
# Latitudinal grid resolution
DPHD			= 0.5
# Vertical model layers
LM 				= 48
# Pressure top of the domain (Pa)
PTOP			= 500.
# Mineral Dust Emission Calibration Factor
DCAL 			= 0.7
# Number of timesteps between radiation calls (short)
NRADS 			= 40
# Number of timesteps between radiation calls (long)
NRADL 			= 40

#-----------------------------------------------------------------------
# Ensemble perturbation factors
#-----------------------------------------------------------------------
DCALBIN1 = 1.0      1.000612 1.082477 1.475536 0.843028 1.423721 1.309229 0.811747 0.995270 1.524607 0.823556 0.475334
DCALBIN2 = 1.0      0.998531 1.074797 1.472015 0.850205 1.430319 1.299753 0.828486 1.002254 1.524329 0.830391 0.479323
DCALBIN3 = 1.0      0.987129 1.093450 1.487424 0.828624 1.437714 1.325002 0.839012 1.009480 1.547502 0.882344 0.468367
DCALBIN4 = 1.0      0.948493 1.082074 1.426227 0.866220 1.381353 1.371184 0.793838 1.048545 1.510950 0.816682 0.387790
DCALBIN5 = 1.0      0.935082 1.101794 1.365402 0.785977 1.493562 1.390100 0.629129 1.101997 1.638613 0.739484 0.426551
DCALBIN6 = 1.0      0.776795 1.287324 1.364965 0.912424 1.331407 1.327775 0.962559 0.923016 1.219089 0.897321 0.764757
DCALBIN7 = 1.0      0.882573 1.407303 0.662187 0.865147 0.802836 1.357229 1.397023 0.811385 0.815051 1.133981 1.124143
DCALBIN8 = 1.0      1.006390 0.886486 1.102514 1.394948 1.286722 1.174099 1.009974 0.945916 0.930637 1.395042 1.018455
PERTURB_USTH = 1.0        1.01643812 0.38722173 1.0121849 0.93356167 0.73258736 1.72922959 1.00050638 0.89468336 1.39104921 1.20099803 1.07560301

#-----------------------------------------------------------------------
#TUNING FOR SOIL HUMIDITY THRESHOLD AND WET DEPOSITION
#-----------------------------------------------------------------------
FECAN=1.75             # Fecan coefficient
BCL_MP_C=50.            # tuning factor for coarse dust below cloud scavenging (grid scale clouds)
BCL_MP_M=100.            # tuning factor for medium dust below cloud scavenging (grid scale clouds)
BCL_MP_F=100.            # tuning factor for fine dust below cloud scavenging (grid scale clouds)
BCL_BMJ_C=50.           # tuning factor for coarse dust below cloud scavenging (convective clouds)
BCL_BMJ_M=100.           # tuning factor for medium dust below cloud scavenging (convective clouds)
BCL_BMJ_F=100.           # tuning factor for fine dust below cloud scavenging (convective clouds)
ICL_MP=1.              # tuning factor for dust incloud scavenging (grid scale clouds)
ICL_BMJ=4.             # tuning factor for dust incloud scavenging (convective clouds)

SEDIM_TYPE=1            # sedimentation scheme (0-implicit,1 explicit) both upwind (pretty diffusive)
VSED5=0.5               # correction factor of sedimentation velocity for bin 5 to correct for diffusive scheme
VSED6=0.3               # correction factor of sedimentation velocity for bin 6 to correct for diffusive scheme
VSED7=0.2               # correction factor of sedimentation velocity for bin 7 to correct for diffusive scheme
VSED8=0.1               # correction factor of sedimentation velocity for bin 8 to correct for diffusive scheme

VDRY=0.5                # tuning factor for dry deposition velocity (excluding gravitational settling

#-----------------------------------------------------------------------
#CHOICE OF DUST SOURCE, EMITTED SIZE DISTRIBUTION AND EMISSION SCHEME
#-----------------------------------------------------------------------
SRC=3                  # 0 Old topographic source from Ginoux et al. (2001) derived at 0.25 degrees (DUSCHEME=0,1,2,3)
                       # 1 New MODIS DB C6 based foo derived at 0.1 degrees (both natural and antropogenic together) (DUSCHEME=0,1,2,3)
                       # 2 New MODIS DB C6 based foo derived at 0.1 degrees (tagged natural and antropogenic) (DUSCHEME=0,1,2,3)
                       # 3 Like #1 to identify the location of sources but like #0 (topo) for the calculation of the vertical flux (DUSCHEME=0,1,2)
                       # 4 Like #2 to identify the location of sources but like #0 (topo) for the calculation of the vertical flux (DUSCHEME=0,1,2)
#                        (#3 and #4 are equivalent to #1 and #2 respectively in the case of DUSCHEME=3)
#                        (For the options above, in the case of DUSCHEME=3 (Kok), SRC is only used to identify the location of the sources)
                       # 5 No source based on topo or MODIS (only DMASK) and no tagging
                       # 6 No source based on topo or MODIS (only DMASK) and tagging for anthropogenic and natural based on MODIS DB

DMASK=2                # 0 Standard desert mask based on monthly vegetation fraction (Perez et al. 2011)
#                          (If SRC=0 it uses the fixed and already masked topo source)
                       # 1 Based on MODIS C5 monthly LAI for the specific year (available for 2001 to 2015)
                       # 2 Based on MODIS C5 monthly LAI climatology (2001 to 2015)

INTERP=1               # 0 Bilinear interpolation of the New MODIS DB C6 foo sources and LAI to the model grid (recommended for resolutions < 0.1 deg)
                       # 1 Averaging the 0.1 deg new MODIS DB C6 foo sources and LAI over coarser resolution grid (recommended for resolutions > 0.1deg)

INTERP2=1              # Always 1 for pringent roughness

SZDSTR=1               # 0 Emitted size distribution from D'Almeida
                       # 1 Emitted size distribution from Kok

DUSCHEME=1             # 0 NMMB default dust emission scheme (Perez et al 2011)
                       # 1 GOCART dust emission scheme from Paul Ginoux
                       # 2 GOCART dust emission scheme from Paul Ginoux with Fecan's humidity treatment as in Kok et al. 2014
                       # 3 KOK dust emission scheme (Kok et al. 2014)

VSLAYER=1              # 0 NMMB default with viscous sublayer
                       # 1 no viscous sublayer (only applies for NMMB default dust scheme)

DRAG_PART=3            # 0 no drag partition scheme in the emission
                       # 1 drag partition forllowing Marticorena with X parameter = 10.
                       # 2 drag partition forllowing Marticorena with X parameter = 12255.
                       # 3 drag partition forllowing Marticorena with X parameter = 40.

MOIST_COR_01=0         # use moisture correction for cohesive force distribution, yes(1)/no(0); only for DUSCHEME=7

VEG_COR_01=0           # use vegetation correction for momentum flux distribution, yes(1)/no(0); only for DUSCHEME=7

#-----------------------------------------------------------------------
#CALCULATE NUMBER OF BINS BASED ON SOURCE CHOICE
#-----------------------------------------------------------------------
NDUST=8                   # 0 (No dust) or 8.   No tagging for SRC options 0 and 1
CATAERO=2                 # 2 output dod (all sky and clear sky) (only 2 works)
NCHEM=42                  # number of tracers bin (don't change)
#-----------------------------------------------------------------------
# Time Configuration
#-----------------------------------------------------------------------
# ** Start date is located in expdef_EXPID.conf **
# Choose the time of initial input data & start hour of the forecast (hours)
HOUR			= 00
# Hours of spinup chemistry/aerosols
SPINUP                  = 0
# Length of the forecast (hours)
NHOURS			= 120
# History init previous day timestep (for couple dust, next run)
NHOURS_INIT		= 24
# Frequency of history output (up to 552 hours)
HIST 			= 6
# Frequency of history output (in minutes)
HIST_M			= 360
# Frequency of boundary condition update for REGIONAL (hours)
BOCO			= 6
# Initial condition analysis files (GFS/FNL):
TYPE_GFSINIT	= GFS
# GFS/FNL degree resolution (0p25, 0p50, 1p00) - Global longitude-latitude grid files (analysis, initial condition files)
GFS_DEGREE_RES 	= 0p50
# Is this a forecast run? (true/false)
FCST = true
# Boundary condition chemistry (CAMS/MOZART)
TYPE_BCCHEM     = CAMS


#-----------------------------------------------------------------------
# POSTPROC configuration
#-----------------------------------------------------------------------
# Version of the postproc (0=operational, 1, 2) to be used:
VERSION_POSTPROC = 2

# Choose the time of initial output data (hours)
HOUR_P			= 00
# Length of postproc data (hours)
NHOURS_P 		= 120
# Frequency of history output (hours)
HIST_P 			= 6

#-- Settings only for POSTPROCv2
# Output Layers (ONLY for PostProc v1.0)
LSM 			= 15

#-- Settings only for POSTPROCv2
DESCR=oper.global
DESCR_AN=du_AN
DESCR_AV_AN=du_AV_AN
POSTPROC2_NAMELIST_SUFFIX = anp

#-----------------------------------------------------------------------
# Couple dust
#-----------------------------------------------------------------------
# Couple dust for the next chunk (0/1)
COUPLE_DUST 	= 1
# Couple dust from the beginning (0/1)
COUPLE_DUST_INIT= 1

# First chunk initialisation path with previous spinup history file
# please make sure that in an ensemble config the subdirectories names in this path must match the MEMBERS list (in expedf.conf)
SPINUP_FOLDER	= /gpfs/archive/bsc32/esarchive/exp/monarch/a0yh/original_files/

#-----------------------------------------------------------------------
# Select IC of chemistry for run with COUPLE_DUST_INIT=0
#-----------------------------------------------------------------------
INIT_CHEM = 1                 # 0. IC from ideal conditions
                              # 1 initialize from a previous run
                              # 2 initialize from inca chem data
                              # 3 initialize from global nmmb-ctm run for regional
                              # 4 initialize from a previous run of different resolution
# Folders on HPC! (TODO: will be moved to esarchive?)
CHEMIC          = /gpfs/projects/bsc32/models/monarch/data/t0_monarch_global_0.5_0.703125

#-----------------------------------------------------------------------
# Initial condition analysis folder (without trailing slash! (/))
#-----------------------------------------------------------------------
# ** _HPC for files already on the remote machine **
# ** _REMOTE for files that has to be moved on HPC remote machine **
# GFS files root folder
GFS_FOLDER_ARCHIVE = /gpfs/archive/bsc32/esarchive/recon/ncep/gfs/original_files
GFS_FOLDER_HPC     = #/gpfs/scratch/bsc32/bsc32771/DATA/GFS
# FNL files root folder
FNL_FOLDER_ARCHIVE = /gpfs/archive/bsc32/esarchive/recon/ncep/ds083.2/original_files
FNL_FOLDER_HPC     = #/gpfs/scratch/bsc32/bsc32771/DATA/FNL
# ERA-Interim files root folder
ERA_FOLDER_ARCHIVE =
ERA_FOLDER_HPC     = /gpfs/scratch/bsc32/bsc32771/DATA/ERA
# CAMS files root folder
CAMS_FOLDER_ARCHIVE   = /gpfs/archive/bsc32/esarchive/scratch/ojorba/tmp/transfer-prace/BC-CAMS
#CAMS_FOLDER_HPC       = /gpfs/scratch/bsc32/bsc32771/tmp/PREPARE_REGIONAL_RUNS/DATA_required/BC-CAMS
# MOZART files root folder
MOZART_FOLDER_ARCHIVE = /gpfs/archive/bsc32/esarchive/recon/ucar/mozart/original_files
MOZART_FOLDER_HPC     = /gpfs/scratch/bsc32/bsc32771/tmp/PREPARE_REGIONAL_RUNS/DATA_required/BC-MOZART

#-----------------------------------------------------------------------
# Output folder for archive (without trailing slash! (/))
#-----------------------------------------------------------------------
# Root folder from where to construct archiving path
ARCHIVE_ROOT_FOLDER		= /gpfs/archive/bsc32/esarchive/exp

#-----------------------------------------------------------------------
# STATIC data folders (without trailing slash! (/))
#-----------------------------------------------------------------------
# Absolute path at HPC that contains the shared Static data folder (created by hand)
#Leave it blank if you want to copy all Static data from repo to your experiment
STATIC_HPC_FOLDER	= /gpfs/projects/bsc32/models/monarch/data/static
# Local NAS repository folder (e.g.: /esnas/exp/nmmb-bsc-ctm_v2.0.4/constant)
CONSTANT_REPO_FOLDER	= /esarchive/exp/nmmb-bsc-ctm/constant

#-----------------------------------------------------------------------
# Config file for compilation (use the one that is suitable for the host)
#-----------------------------------------------------------------------
# Version of the config file used at compilation (example: mn3-O3, mn3-O1, ecmwf-O3)
COMPILATION_CONFIG_SUFFIX = mn4
# Select profile among the supported platforms in nceplibs compile script
NCEPLIBS_CONFIG = 5

#-----------------------------------------------------------------------
# DUST_DA CONFIGURATION
#-----------------------------------------------------------------------
# it should be managed by autosubmit like DO_PREMEGAN
# Do Data Assimilation for dust? (0=no/1=yes)
DO_DA			= 0

# number of time slots
DA_NSLOTS		= 4
# step between model output (hours) (Usually the same as Frequency of history output)
DA_IOSTEP		= 6

#######        function not available now!     #############
####### (requires post proc of observations files) #########
DA_FOLDER_ARCHIVE =
############################################################
DA_FOLDER_HPC     = 

#-----------------------------------------------------------------------
# GLOBAL AEROSOL CONFIGURATION
#-----------------------------------------------------------------------
# it should be managed by autosubmit like DO_DA
# Do premegan? (0=no/1=yes)
DO_PREMEGAN = 1

# Folders on HPC! (TODO: will be moved to esarchive?)
DATAMEGAN=/gpfs/projects/bsc32/models/monarch/data/static/emissions/DATA_megan_v2.04
# if not present, the first run of hermes will need 4h to prepare static data
HERMES_AUXFILES=/gpfs/projects/bsc32/models/hermesv3/
# static anthropogenic databases for HERMES
HERMES_DATA_ANTHRO=/gpfs/projects/bsc32/models/hermesv3/data
# HERMES temporal resolution of anthropogenic emissions ('hourly','daily','monthly','yearly'/ only works hourly)
HERMES_ANTHRO_RES='monthly'

# ** _HPC for files already on the remote machine **
# ** _REMOTE for files that has to be moved on HPC remote machine **
# GFAS files root folder
GFAS_FOLDER_HPC     =
GFAS_FOLDER_ARCHIVE =/gpfs/archive/bsc32/esarchive/recon/ecmwf/gfas/daily_mean/multivar/
# anthropogenic global emission data
AGE_FOLDER_HPC      = 
AGE_FOLDER_ARCHIVE  = 
# anthropogenic regional emission data
ARE_FOLDER_HPC      =
ARE_FOLDER_ARCHIVE  =
